<div class="row">
  <uib-accordion close-others="false">
    <uib-accordion-group is-open="paTrialOverview.accordionOpen">
      <uib-accordion-heading>
        General Trial Details <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': paTrialOverview.accordionOpen, 'glyphicon-chevron-right': !paTrialOverview.accordionOpen}"></i>
      </uib-accordion-heading>
      <div class="row">
        <form name="general_trial_details_form" role="form" class="form-horizontal" novalidate ctrp-submit="generalTrialDetailView.saveGeneralTrialDetails()">
          <!-- fieldset for Title -->
          <fieldset class="sub-bordered">
            <legend class="sub-bordered">Title</legend>
            <div class="form-group">
              <label for="acronym" class="control-label col-xs-12 col-sm-2">Acronym</label>
              <div class="col-xs-12 col-sm-10">
                <input type="text" id="acronym" name="trial_acronym" class="form-control" ng-model="generalTrialDetailView.generalTrialDetailsObj.acronym" placeholder="Acronym">
              </div>
            </div>

            <div class="form-group">
              <label for="official_title" class="control-label col-xs-12 col-sm-2">Official Title</label>
              <div class="col-xs-12 col-sm-10">
                <textarea name="trial_official_title" id="official_title" rows="5" class="form-control"
                    ng-model="generalTrialDetailView.generalTrialDetailsObj.official_title">
                </textarea>
              </div>
            </div>
          </fieldset>

          <!-- fieldset for Alternate Titles -->
          <fieldset class="sub-bordered">
            <legend class="sub-bordered">Alternate Titles</legend>
            <!-- category -->
            <div class="form-group">
              <div class="col-xs-12 col-sm-6">
                <label for="category" class="control-label col-xs-12 col-sm-3">Category</label>
                <div class="col-xs-12 col-sm-9">
                  <select name="category" id="category" class="form-control">
                    <option value="Spelling/Formatting Correction">Spelling/Format</option>
                    <option value="Other">Other</option>
                  </select>
                </div>
              </div>
              <div class="col-xs-12 col-sm-6">
                <textarea name="alternate_title_category" id="alternate_title1" rows="1" class="form-control" ng-maxlength="4000"></textarea>
              </div>
            </div>

            <!-- source -->
            <div class="form-group">
              <div class="col-xs-12 col-sm-6">
                <label for="source" class="control-label col-xs-12 col-sm-3">Source</label>
                <div class="col-xs-12 col-sm-9">
                  <select name="source" id="source" class="form-control" ng-model="generalTrialDetailView.generalTrialDetailsObj.source">
                    <option value="Protocol" ng-selected="true">Protocol</option>
                    <option value="Complete Sheet">Complete Sheet</option>
                    <option value="IRB">IRB</option>
                    <option value="Other">Other</option>
                  </select>
                </div>
              </div>
              <div class="col-xs-12 col-sm-6">
                <textarea name="alternate_title_source" id="alternate_title2" rows="1" class="form-control" ng-maxlength="4000"></textarea>
              </div>
            </div>

            <!-- button -->
            <div class="form-group">
              <div class="col-xs-12">
                <button class="btn btn-default">Add Alternate Title</button>
              </div>
            </div>

          </fieldset>

          <!-- fieldset for Trial Description -->
          <fieldset class="sub-bordered">
            <legend class="sub-bordered">Trial Description</legend>
            <label for="keywords" class="control-label col-xs-12 col-sm-2">Keywords</label>
            <div class="col-xs-12 col-sm-10">
              <textarea name="keywords" id="keywords" rows="5" class="form-control" ng-maxlength="4000"
                  ng-model="generalTrialDetailView.generalTrialDetailsObj.keywords">
              </textarea>
            </div>
          </fieldset>

          <!--fielset for Other Trial Identifiers -->
          <fieldset class="sub-bordered">
            <legend class="sub-bordered">Other Trial Identifiers</legend>
            <!-- form group for adding other identifier -->
            <div class="form-group">
              <label for="other_identifier" class="control-label col-xs-12 col-sm-2">Other Identifier</label>
              <div class="col-xs-12 col-sm-10">
                <div class="col-xs-12 col-sm-3">
                  <select ng-init="generalTrialDetailView.otherIdentifier.protocol_id_origin_id" class="form-control input-sm" id="other_identifier"
                      ng-model="generalTrialDetailView.otherIdentifier.protocol_id_origin_id"
                      ng-options="identifier.id as identifier.name for identifier in generalTrialDetailView.protocolIdOriginArr" name="other_ids">
                      <option value="">Select an identifier</option>
                  </select>
                </div>
                <div class="col-xs-12 col-sm-6">
                  <input type="text" id="identifier_name" class="form-control input-sm" ng-model="generalTrialDetailView.otherIdentifier.protocol_id">
                </div>
                <div class="col-xs-12 col-sm-3">
                    <!-- otherIdentifier = {protocol_id_origin_id: '', protocol_id: ''}; -->
                  <button type="button" class="btn btn-default" ng-click="generalTrialDetailView.addOtherIdentifier()" ng-disabled="generalTrialDetailView.otherIdentifier.protocol_id == ''">Add Other Identifier</button>
                </div>
              </div>
            </div>

            <!-- form group for displaying the added other identifiers -->
            <div class="form-group">
              <table class="table table-bordered table-striped table-hover">
                <thead style="background-color: #d9edf7">
                  <th>Identifier Type</th>
                  <th>Value (Click for editing)</th>
                  <th class="text-center">Deletion</th>
                </thead>
                <tbody>
                  <tr ng-repeat="otherId in generalTrialDetailView.generalTrialDetailsObj.other_ids track by $index" class="animated-item" ng-class="otherId._destroy ? 'deleted-text' : ''">
                    <td>{{otherId.identifierName}}</td>
                    <td>
                        <span in-place-edit="otherId.protocol_id" on-save="generalTrialDetailView.updateOtherId(otherId.protocol_id, $index)"
                              template="app/pa/dashboard/abstraction/admin/other_identifier_edit_template.html" id="#other_id_edit">
                              {{otherId.protocol_id}}
                        </span>
                    </td>
                    <td class="text-center">
                        <!-- <button type="button" class="btn btn-default">Edit</button> -->
                        <!-- <button type="button" class="btn btn-default" ng-click="generalTrialDetailView.deleteOtherIdentifier($index)">Delete</button> -->
                        <label class="btn btn-default" restriction-field ng-click="generalTrialDetailView.deleteOtherIdentifier($index)">
                            <i class="glyphicon" ng-class="otherId._destroy == true ? 'glyphicon-ok-circle' : 'glyphicon-remove-circle'"></i>
                        </label>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </fieldset>

          <!--fieldset for Lead Organization/Principal Investigator -->
          <fieldset class="sub-bordered">
            <legend class="sub-bordered">Lead Organization/Principal Investigator</legend>
            <!-- Lead Organization -->
            <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.general_trial_details_form.needsAttention(general_trial_details_form.lead_organization)}">
              <label for="lead_org" class="control-label col-xs-12 col-sm-2">Lead Organization</label>
              <div class="col-xs-12 col-sm-10">
                <div class="col-xs-12 col-sm-6">
                  <input type="text" id="lead_org" name="lead_organization" ng-model="generalTrialDetailView.leadOrg[0].name" disabled class="form-control" placeholder="Lead Organization" required>
                  <span class="form-control-feedback" ng-show="generalTrialDetailView.leadOrg.length == 0" ng-class="general_trial_details_form.lead_organization.$dirty &&
                      !ctrpbtn.general_trial_details_form.needsAttention(general_trial_details_form.lead_organization) ?
                      'glyphicon glyphicon-ok glyphicon-green' : 'glyphicon glyphicon-exclamation-sign glyphicon-red'"></span>
                  <span class="help-block" ng-show="general_trial_details_form.lead_organization.$dirty && general_trial_details_form.lead_organization.$error.required">Lead organization is Required</span>
                </div>
                <div class="col-xs-12 col-sm-6">
                  <!-- <button class="btn btn-primary">Look Up Organization</button> -->
                  <ctrp-org-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-orgs-array="generalTrialDetailView.leadOrg"></ctrp-org-adv-search-modal-button>
                </div>
              </div>
            </div>

            <!-- Principal investigator -->
            <div class="form-group">
              <label for="pi" class="control-label col-xs-12 col-sm-2">Principal Investigator</label>
              <div class="col-xs-12 col-sm-10">
                <div class="col-xs-12 col-sm-6">
                  <input type="text" id="pi" name="principal_investigator" disabled class="form-control" ng-model="generalTrialDetailView.principalInvestigator[0].fullName" placeholder="Principal Investigator">
                </div>
                <div class="col-xs-12 col-sm-6">
                  <!-- <button class="btn btn-primary">Look Up Person</button> -->
                  <ctrp-person-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-persons-array="generalTrialDetailView.principalInvestigator"></ctrp-person-adv-search-modal-button>
                </div>
              </div>
            </div>
          </fieldset>

          <!-- fieldset for Spnsor -->
          <fieldset class="sub-bordered">
            <legend class="sub-bordered">Sponsor</legend>
            <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.general_trial_details_form.needsAttention(general_trial_details_form.sponsor)}">
              <label for="sponsor" class="control-label col-xs-12 col-sm-2">Sponsor</label>
              <div class="col-xs-12 col-sm-10">
                <div class="col-xs-12 col-sm-6">
                  <input type="text" id="sponsor" name="sponsor" ng-model="generalTrialDetailView.sponsors[0].name" disabled class="form-control" placeholder="Sponsor" required>
                  <!-- <input type="text" id="sponsor" name="sponsor" disabled class="form-control" placeholder="Sponsor"> -->
                  <span class="form-control-feedback" ng-show="generalTrialDetailView.sponsors.length == 0" ng-class="general_trial_details_form.sponsor.$dirty &&
                      !ctrpbtn.general_trial_details_form.needsAttention(general_trial_details_form.sponsor) ?
                      'glyphicon glyphicon-ok glyphicon-green' : 'glyphicon glyphicon-exclamation-sign glyphicon-red'"></span>
                  <span class="help-block" ng-show="general_trial_details_form.sponsor.$dirty && general_trial_details_form.sponsor.$error.required">Sponsor is Required</span>
                </div>
                <div class="col-xs-12 col-sm-6">
                  <!-- <button class="btn btn-primary">Look Up Sponsor</button> -->
                  <ctrp-org-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-orgs-array="generalTrialDetailView.sponsors"></ctrp-org-adv-search-modal-button>
                </div>
              </div>
            </div>
          </fieldset>

          <!-- fieldset for Central Contact -->
          <fieldset class="sub-bordered">
            <legend class="sub-bordered">Central Contact</legend>
            <!-- Central contact -->
            <div class="form-group">
                <div class="row" style="margin-bottom: 7px;">
                    <div class="col-sm-offset-3 col-sm-9 col-xs-12">
                        <label class="radio-inline control-label">
                          <input type="radio" name="contact_type" value="" ng-model="generalTrialDetailView.centralContactType">None
                        </label>
                        <label class="radio-inline control-label">
                          <input type="radio" name="contact_type" value="PI" ng-model="generalTrialDetailView.centralContactType">PI
                        </label>
                        <label class="radio-inline control-label">
                            <input type="radio" name="contact_type" value="Person" ng-model="generalTrialDetailView.centralContactType">Person
                        </label>
                        <label class="radio-inline control-label">
                            <input type="radio" name="contact_type" value="General" ng-model="generalTrialDetailView.centralContactType">General
                        </label>
                    </div>
                </div>
            </div>
            <div ng-hide="generalTrialDetailView.centralContactType == ''">
              <div class="form-group">
                <label for="central_contact" class="control-label col-xs-12 col-sm-2">Central Contact</label>
                <div class="col-xs-12 col-sm-10">
                  <div class="col-xs-12 col-sm-6">
                    <input type="text" id="central_contact" name="central_contact" placeholder="Central Contact"
                        ng-disabled="generalTrialDetailView.centralContactType != 'General'"
                        class="form-control" ng-model="generalTrialDetailView.centralContact[0].fullName"
                        >
                  </div>
                  <div class="col-xs-12 col-sm-6" ng-show="generalTrialDetailView.centralContactType == 'Person'">
                    <!-- <button class="btn btn-primary">Look Up Person</button> -->
                    <ctrp-person-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-persons-array="generalTrialDetailView.centralContact"></ctrp-person-adv-search-modal-button>
                  </div>
                </div>
              </div>

              <!-- Email Address -->
              <div class="form-group">
                <label for="email" class="control-label col-xs-12 col-sm-2">Email Address</label>
                <div class="col-xs-12 col-sm-10">
                  <div class="col-xs-12 col-sm-6">
                    <input type="email" id="email" name="email" ng-model="generalTrialDetailView.centralContact[0].email" class="form-control" placeholder="Email">
                  </div>
                </div>
              </div>

              <!-- Phone Number -->
              <div class="form-group">
                <label for="phone" class="control-label col-xs-12 col-sm-2">Phone Number</label>
                <div class="col-xs-12 col-sm-10">
                  <div class="col-xs-12 col-sm-6">
                    <input type="text" id="phone" name="phone" ng-model="generalTrialDetailView.centralContact[0].phone" class="form-control" placeholder="Phone">
                  </div>
                </div>
              </div>
            </div>
          </fieldset>

          <div class="form-group no-bottom-margin">
            <div class="col-sm-3"></div>
            <div class="btn-toolbar col-xs-12 col-sm-9">
              <button type="submit" class="btn btn-primary pull-right" id="save_btn" ng-click="generalTrialDetailView.saveUpdate()" restriction-field>
                <i class="glyphicon glyphicon-ok"></i>  Save
              </button>
              <button type="button" class="btn btn-warning pull-right" id="cancel_btn" ng-click="generalTrialDetialView.cancelUpdate()" restriction-field>
               <i class="glyphicon glyphicon-remove"></i>  Cancel
              </button>
            </div>
          </div>
        </form>
      </div>

    </uib-accordion-group>
  </uib-accordion>
</div>
