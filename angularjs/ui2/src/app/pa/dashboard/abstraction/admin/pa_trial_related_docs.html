<div class="row">
    <uib-accordion close-others="false">
         <uib-accordion-group is-open="paTrialOverview.accordionOpen">
              <uib-accordion-heading>
                Trial Related Documents <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': paTrialOverview.accordionOpen, 'glyphicon-chevron-right': !paTrialOverview.accordionOpen}"></i>
              </uib-accordion-heading>
                  <div class="row">
                    <form name="trial_docs_form" role="form" class="form-horizontal" novalidate ctrp-submit="trialRelatedDocsView.saveDocuments()">
                        <fieldset class="sub-bordered" ng-disabled="!paTrialOverview.trialDetailObj.pa_editable">
                            <legend class="sub-bordered">Trial Related Documents</legend>
                             <div class="form-group">
                                <div class="row top-buffer">
                                    <div class="col-sm-5">
                                        <label class="control-label col-xs-12 col-sm-4">Document Type</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <select name="doc_type" id="doc_type"
                                                class="form-control input-sm"
                                                restriction-field
                                                ng-model="trialRelatedDocsView.curDoc.document_type"
                                                ng-options="type for type in trialRelatedDocsView.documentTypes">
                                                <option value="">- Please select a document type ...</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-sm-5">
                                        <input type="file" restriction-field ngf-select=""
                                               ng-model="trialRelatedDocsView.curDoc.file_name"
                                               name="current_doc" ngf-max-size="10MB"
                                               validate-file-type="{{trialRelatedDocsView.acceptedFileExtensions}}">
                                    </div>
                                    <div class="col-sm-2 pull-left" ng-hide="trialRelatedDocsView.curDoc.edit">
                                        <button type="button" class="btn btn-default"
                                            ng-click="trialRelatedDocsView.upsertDoc(trialRelatedDocsView.curDoc.index)"
                                            ng-disabled="trialRelatedDocsView.curDoc.document_type=='' ||
                                            trialRelatedDocsView.curDoc.file_name==''">Save</button>
                                    </div>
                                    <div class="col-sm-2 pull-left" ng-show="trialRelatedDocsView.curDoc.edit">
                                        <button type="button" class="btn btn-danger" ng-click="trialRelatedDocsView.upsertDoc(trialRelatedDocsView.curDoc.index)"
                                        ng-disabled="trialRelatedDocsView.curDoc.document_type=='' ||
                                        trialRelatedDocsView.curDoc.file_name==''">Update</button>
                                    </div>
                                </div>
                                <div class="row top-buffer">
                                     <!-- <table class="table table-striped table-condensed table-hover">
                                         <thead>
                                             <tr>
                                                <th class="file_name" custom-sort order="'file_name'" sort="sort">File Name&nbsp;</th>
                                                <th class="document_type" custom-sort order="'document_type'" sort="sort">Document Type&nbsp;</th>
                                                <th class="document_subtype" custom-sort order="'document_subtype'" sort="sort">Document Subtype&nbsp;</th>
                                                <th class="updated_at" custom-sort order="'updated_at'" sort="sort">Date Added&nbsp;</th>
                                                <th class="added_by" custom-sort order="'added_by'" sort="sort">Added By&nbsp;</th>
                                                <th>Edit</th>
                                                <th>Delete</th>
                                            </tr>
                                         </thead>
                                     </table> -->
                                     <table st-table="rowCollection" class="table table-bordered table-striped table-hover">
                                         <thead style="background-color: #d9edf7">
                                             <tr>
                                                <th>File Name&nbsp;</th>
                                                <th>Document Type&nbsp;</th>
                                                <th>Document Subtype&nbsp;</th>
                                                <th>Date Added&nbsp;</th>
                                                <th>Added By&nbsp;</th>
                                                <th>Delete/Edit</th>
                                            </tr>
                                         </thead>
                                         <tbody>
                                             <tr ng-repeat="doc in trialRelatedDocsView.curTrialDetailObj.trial_documents track by $index" class="animated-item" ng-class="doc._destroy ? 'deleted-text' : ''">
                                                 <td><a ng-class="doc._destroy ? 'deleted-text' : ''" href="{{trialRelatedDocsView.downloadBaseUrl}}/{{doc.id}}">{{doc.file_name}}</a></td>
                                                 <td>{{doc.document_type}}</td>
                                                 <td>{{doc.document_subtype}}</td>
                                                 <td>{{doc.updated_at | date: "dd-MMM-yyyy H:mm"}}</td>
                                                 <td>{{doc.added_by.username}} <!-- to be replaced with full name when available --></td>
                                                 <td class="text-center" class="col-sm-1">
                                                     <label class="btn btn-default" restriction-field ng-click="trialRelatedDocsView.deleteDoc($index)">
                                                         <i class="glyphicon" ng-class="doc._destroy ? 'glyphicon-ok-circle' : 'glyphicon-remove-circle'"></i>
                                                     </label>
                                                     <label class="btn btn-default" restriction-field ng-disabled="status._destroy" ng-click="trialRelatedDocsView.editDoc($index)">
                                                         <i class="glyphicon glyphicon-edit"></i>
                                                     </label>
                                                 </td>
                                             </tr>
                                         </tbody>
                                     </table>
                                 </div>
                             </div>
                         </fieldset>
                    </form>
                </div>

          </uib-accordion-group>
      </uib-accordion>
  </div>
