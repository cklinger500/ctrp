<div class="row-fluid">
    <div class="col-xs-12 col-border">
        <div class="row">
            <p><h4 ng-if="trialDetailView.curTrial.new"><mark>Register Trial</mark></h4></p>
            <p><h4 ng-if="!trialDetailView.curTrial.new"><mark>Edit Trial</mark></h4></p>
        </div>

        <div class="row">
            <p>
                <button class="btn btn-primary" ng-show="!trialDetailView.collapsed" ng-click="trialDetailView.collapseAccordion()">
                    <i class="glyphicon glyphicon-minus"></i> Collapse All
                </button>
                <button class="btn btn-primary" ng-show="trialDetailView.collapsed" ng-click="trialDetailView.expandAccordion()">
                    <i class="glyphicon glyphicon-plus"></i> Expand All
                </button>
            </p>
        </div>

        <div class="row">
            <form class="form-horizontal" role="form" name="trial_form" novalidate>
                <accordion close-others="false">
                    <accordion-group is-open="trialDetailView.accordions[0]">
                        <accordion-heading>
                            Trial Identifiers  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[0], 'glyphicon-chevron-right': !trialDetailView.accordions[0]}"></i>
                        </accordion-heading>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Study Source:</label>
                            <div class="col-sm-6">
                                <select class="form-control" id="study_source" ng-model="trialDetailView.curTrial.study_source_id"
                                        ng-options="studySource.id as studySource.name for studySource in trialDetailView.studySourceArr" disabled>
                                    <option value="">--</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3 required">Lead Protocol Identifier:</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control input-xs" id="lead_protocol_id" name="lead_protocol_id" ng-model="trialDetailView.curTrial.lead_protocol_id" required autofocus>
                                <p ng-show="trial_form.lead_protocol_id.$error.required && trial_form.lead_protocol_id.$dirty" class="help-inline text-danger">
                                    Lead Protocol Identifier is required
                                </p>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Other Trial Identifier:</label>
                            <div class="col-sm-6">
                                <table class="table table-striped table-condensed">
                                    <thead>
                                        <th>Protocol ID Origin</th>
                                        <th>Protocol ID</th>
                                        <th></th>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td class="col-md-4">
                                            <div>
                                                <select class="form-control" id="protocol_id_origin" ng-model="trialDetailView.protocol_id_origin_id">
                                                    <option value="">-Select an Origin-</option>
                                                    <option ng-repeat="origin in trialDetailView.protocolIdOriginArr" value="{{origin.id}}">
                                                        {{origin.name}}
                                                    </option>
                                                </select>
                                            </div>
                                        </td>
                                        <td class="col-md-7">
                                            <div>
                                                <input type="text" class="form-control input-xs" id="protocol_id" ng-model="trialDetailView.protocol_id" />
                                            </div>
                                        </td>
                                        <td class="col-md-1">
                                            <div>
                                                <button class="btn btn-primary" ng-click="trialDetailView.addOtherId()">
                                                    <i class="glyphicon glyphicon-plus"></i> Add
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                                <table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedOtherIds.length > 0">
                                    <thead>
                                    <th>Protocol ID Origin</th>
                                    <th>Protocol ID</th>
                                    <th></th>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="otherId in trialDetailView.addedOtherIds track by $index" ng-class="otherId._destroy == true ? 'deleted-text animated-item' : 'animated-item'">
                                        <td class="col-md-4">{{otherId.protocol_id_origin_name}}</td>
                                        <td class="col-md-7">{{otherId.protocol_id}}</td>
                                        <td class="col-md-1" style="vertical-align: middle">
                                            <label class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, 'other_id')">
                                                <i ng-class="otherId._destroy == true ? 'glyphicon glyphicon-ok-circle' : 'glyphicon glyphicon-remove-circle'"></i>
                                            </label>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </accordion-group>

                    <accordion-group is-open="trialDetailView.accordions[1]">
                        <accordion-heading>
                            Trial Details  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[1], 'glyphicon-chevron-right': !trialDetailView.accordions[1]}"></i>
                        </accordion-heading>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3 required">Official Title:</label>
                            <div class="col-sm-6">
                                <textarea class="form-control input-xs" id="official_title" name="official_title" ng-model="trialDetailView.curTrial.official_title" required />
                                <p ng-show="trial_form.official_title.$error.required && trial_form.official_title.$dirty" class="help-inline text-danger">
                                    Official Title is required
                                </p>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3 required">Phase:</label>
                            <div class="col-sm-6">
                                <select class="form-control" id="phase" name="phase" ng-model="trialDetailView.curTrial.phase_id"
                                        ng-options="phase.id as phase.name for phase in trialDetailView.phaseArr" required>
                                    <option value="">-Select a Phase-</option>
                                </select>
                                <p ng-show="trial_form.phase.$error.required && trial_form.phase.$dirty" class="help-inline text-danger">
                                    Phase is required
                                </p>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3 required">Pilot?</label>
                            <div class="col-sm-1">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.pilot" value="No"> No</label>
                            </div>
                            <div class="col-sm-2">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.pilot" value="Yes"> Yes</label>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3 required">Research Category:</label>
                            <div class="col-sm-6">
                                <select class="form-control" id="research_category" name="research_category" ng-model="trialDetailView.curTrial.research_category_id"
                                        ng-options="category.id as category.name for category in trialDetailView.researchCategoryArr" required>
                                    <option value="">-Select a Research Category-</option>
                                </select>
                                <p ng-show="trial_form.research_category.$error.required && trial_form.research_category.$dirty" class="help-inline text-danger">
                                    Research Category is required
                                </p>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3 required">Primary Purpose:</label>
                            <div class="col-sm-6">
                                <select class="form-control" id="primary_purpose" name="primary_purpose" ng-model="trialDetailView.curTrial.primary_purpose_id"
                                        ng-options="primaryPurpose.id as primaryPurpose.name for primaryPurpose in trialDetailView.primaryPurposeArr"
                                        ng-change="trialDetailView.watchOption('primary_purpose')" required>
                                    <option value="">-Select a Primary Purpose-</option>
                                </select>
                                <p ng-show="trial_form.primary_purpose.$error.required && trial_form.primary_purpose.$dirty" class="help-inline text-danger">
                                    Primary Purpose is required
                                </p>
                            </div>
                        </div>

                        <div ng-show="trialDetailView.showPrimaryPurposeOther" class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Describe "Other" Primary Purpose:</label>
                            <div class="col-sm-6">
                                <textarea class="form-control input-xs" id="primary_purpose_other" ng-model="trialDetailView.curTrial.primary_purpose_other" />
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Secondary Purpose:</label>
                            <div class="col-sm-6">
                                <select class="form-control" id="secondary_purpose" name="secondary_purpose" ng-model="trialDetailView.curTrial.secondary_purpose_id"
                                        ng-options="secondaryPurpose.id as secondaryPurpose.name for secondaryPurpose in trialDetailView.secondaryPurposeArr"
                                        ng-change="trialDetailView.watchOption('secondary_purpose')">
                                    <option value="">-Select a Secondary Purpose-</option>
                                </select>
                            </div>
                        </div>

                        <div ng-show="trialDetailView.showSecondaryPurposeOther" class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Describe "Other" Secondary Purpose:</label>
                            <div class="col-sm-6">
                                <textarea class="form-control input-xs" id="secondary_purpose_other" ng-model="trialDetailView.curTrial.secondary_purpose_other" />
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3 required">Accrual Disease Terminology:</label>
                            <div class="col-sm-6">
                                <select class="form-control" id="accrual_disease_term" name="accrual_disease_term" ng-model="trialDetailView.curTrial.accrual_disease_term_id"
                                        ng-options="term.id as term.name for term in trialDetailView.accrualDiseaseTermArr" required>
                                    <option value="">-Select an Accrual Disease Terminology-</option>
                                </select>
                                <p ng-show="trial_form.accrual_disease_term.$error.required && trial_form.accrual_disease_term.$dirty" class="help-inline text-danger">
                                    Accrual Disease Terminology is required
                                </p>
                            </div>
                        </div>
                    </accordion-group>

                    <accordion-group is-open="trialDetailView.accordions[2]">
                        <accordion-heading>
                            Lead Organization/Principal Investigator  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[2], 'glyphicon-chevron-right': !trialDetailView.accordions[2]}"></i>
                        </accordion-heading>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Lead Organization:</label>
                            <div class="col-sm-9">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-8">
                                        <input type="text" class="form-control input-xs" disabled value="{{trialDetailView.selectedLoArray[0].name}}"/>
                                    </div>
                                    <div class="col-xs-12 col-sm-4">
                                        <ctrp-org-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-orgs-array="trialDetailView.selectedLoArray"></ctrp-org-adv-search-modal-button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Principal Investigator:</label>
                            <div class="col-sm-9">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-8">
                                        <input type="text" class="form-control input-xs" disabled value="{{trialDetailView.selectedPiArray[0].fname + ' ' + (trialDetailView.selectedPiArray[0].mname ? trialDetailView.selectedPiArray[0].mname + ' ' : '') + trialDetailView.selectedPiArray[0].lname}}"/>
                                    </div>
                                    <div class="col-xs-12 col-sm-4">
                                        <ctrp-person-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-persons-array="trialDetailView.selectedPiArray"></ctrp-person-adv-search-modal-button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </accordion-group>

                    <accordion-group is-open="trialDetailView.accordions[3]">
                        <accordion-heading>
                            Sponsor/Responsible Party  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[3], 'glyphicon-chevron-right': !trialDetailView.accordions[3]}"></i>
                        </accordion-heading>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Sponsor:</label>
                            <div class="col-sm-9">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-8">
                                        <input type="text" class="form-control input-xs" disabled value="{{trialDetailView.selectedSponsorArray[0].name}}"/>
                                    </div>
                                    <div class="col-xs-12 col-sm-4">
                                        <ctrp-org-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-orgs-array="trialDetailView.selectedSponsorArray"></ctrp-org-adv-search-modal-button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3 required">Responsible Party:</label>
                            <div class="col-sm-6">
                                <select class="form-control" id="responsible_party" name="responsible_party" ng-model="trialDetailView.curTrial.responsible_party_id"
                                        ng-options="responsibleParty.id as responsibleParty.name for responsibleParty in trialDetailView.responsiblePartyArr"
                                        ng-change="trialDetailView.watchOption('responsible_party')" required>
                                    <option value="">-Select a Responsible Party-</option>
                                </select>
                                <p ng-show="trial_form.responsible_party.$error.required && trial_form.responsible_party.$dirty" class="help-inline text-danger">
                                    Responsible Party is required
                                </p>
                            </div>
                        </div>

                        <div ng-show="trialDetailView.showInvestigator" class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Investigator:</label>
                            <div class="col-sm-9">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-8">
                                        <input type="text" class="form-control input-xs" disabled value="{{trialDetailView.selectedInvArray[0].fname + ' ' + (trialDetailView.selectedInvArray[0].mname ? trialDetailView.selectedInvArray[0].mname + ' ' : '') + trialDetailView.selectedInvArray[0].lname}}"/>
                                    </div>
                                    <div class="col-xs-12 col-sm-4" ng-show="trialDetailView.showInvSearchBtn">
                                        <ctrp-person-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-persons-array="trialDetailView.selectedInvArray"></ctrp-person-adv-search-modal-button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div ng-show="trialDetailView.showInvestigator" class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Investigator Title:</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control input-xs" id="investigator_title" ng-model="trialDetailView.curTrial.investigator_title">
                            </div>
                        </div>

                        <div ng-show="trialDetailView.showInvestigator" class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Investigator Affiliation:</label>
                            <div class="col-sm-9">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-8">
                                        <input type="text" class="form-control input-xs" disabled value="{{trialDetailView.selectedIaArray[0].name}}"/>
                                    </div>
                                    <div class="col-xs-12 col-sm-4" ng-show="!trialDetailView.showInvSearchBtn">
                                        <ctrp-org-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-orgs-array="trialDetailView.selectedIaArray"></ctrp-org-adv-search-modal-button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </accordion-group>

                    <accordion-group is-open="trialDetailView.accordions[4]">
                        <accordion-heading>
                            Data Table 4 Information  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[4], 'glyphicon-chevron-right': !trialDetailView.accordions[4]}"></i>
                        </accordion-heading>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Data Table 4 Funding Source:</label>
                            <div class="col-sm-9">
                                <div class="col-xs-12 col-sm-4">
                                    <ctrp-org-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-orgs-array="trialDetailView.selectedFsArray" allow-overwrite="false"></ctrp-org-adv-search-modal-button>
                                </div>
                            </div>
                        </div>

                        <div ng-repeat="fs in trialDetailView.addedFses track by $index" class="form-group col-sm-12">
                            <label class="control-label col-sm-3"></label>
                            <div class="col-sm-9">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-8">
                                        <input type="text" class="form-control input-xs" ng-class="fs._destroy == true ? 'deleted-text animated-item' : 'animated-item'" disabled value="{{fs.organization_name}}"/>
                                    </div>
                                    <div class="col-xs-12 col-sm-4">
                                        <label class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, 'funding_source')">
                                            <i ng-class="fs._destroy == true ? 'glyphicon glyphicon-ok-circle' : 'glyphicon glyphicon-remove-circle'"></i>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Program code:</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control input-xs" id="program_code" ng-model="trialDetailView.curTrial.program_code">
                            </div>
                        </div>
                    </accordion-group>

                    <accordion-group is-open="trialDetailView.accordions[5]">
                        <accordion-heading>
                            NIH Grant Information (for NIH funded Trials)  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[5], 'glyphicon-chevron-right': !trialDetailView.accordions[5]}"></i>
                        </accordion-heading>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3 required">Is this trial funded by an NCI grant?</label>
                            <div class="col-sm-1">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.grant_question" value="Yes"> Yes</label>
                            </div>
                            <div class="col-sm-2">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.grant_question" value="No"> No</label>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <div class="col-sm-12">
                                <table class="table table-striped table-condensed">
                                    <thead>
                                    <th>Funding Mechanism</th>
                                    <th>Institute Code</th>
                                    <th>Serial Number</th>
                                    <th>NCI Division/Program Code</th>
                                    <th></th>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td class="col-md-2">
                                            <div>
                                                <select class="form-control" id="funding_mechanism" ng-model="trialDetailView.funding_mechanism">
                                                    <option value="">-Select-</option>
                                                    <option ng-repeat="mechanism in trialDetailView.fundingMechanismArr" value="{{mechanism.code}}">
                                                        {{mechanism.code}}
                                                    </option>
                                                </select>
                                            </div>
                                        </td>
                                        <td class="col-md-2">
                                            <div>
                                                <select class="form-control" id="institute_code" ng-model="trialDetailView.institute_code">
                                                    <option value="">-Select-</option>
                                                    <option ng-repeat="institute in trialDetailView.instituteCodeArr" value="{{institute.code}}">
                                                        {{institute.code}}
                                                    </option>
                                                </select>
                                            </div>
                                        </td>
                                        <td class="col-md-3">
                                            <div>
                                                <input class="form-control input-xs" id="serial_number" ng-model="trialDetailView.serial_number" />
                                            </div>
                                        </td>
                                        <td class="col-md-4">
                                            <div>
                                                <select class="form-control" id="nci" ng-model="trialDetailView.nci">
                                                    <option value="">-Select-</option>
                                                    <option ng-repeat="nci in trialDetailView.nciArr" value="{{nci.code}}">
                                                        {{nci.code}}
                                                    </option>
                                                </select>
                                            </div>
                                        </td>
                                        <td class="col-md-1">
                                            <div>
                                                <button class="btn btn-primary" ng-click="trialDetailView.addGrant()">
                                                    <i class="glyphicon glyphicon-plus"></i> Add
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                                <table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedGrants.length > 0">
                                    <thead>
                                        <th>Funding Mechanism</th>
                                        <th>Institute Code</th>
                                        <th>Serial Number</th>
                                        <th>NCI Division/Program Code</th>
                                        <th></th>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="grant in trialDetailView.addedGrants track by $index" ng-class="grant._destroy == true ? 'deleted-text animated-item' : 'animated-item'">
                                        <td class="col-md-2">{{grant.funding_mechanism}}</td>
                                        <td class="col-md-2">{{grant.institute_code}}</td>
                                        <td class="col-md-3">{{grant.serial_number}}</td>
                                        <td class="col-md-4">{{grant.nci}}</td>
                                        <td class="col-md-1" style="vertical-align: middle">
                                            <label class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, 'grant')">
                                                <i ng-class="grant._destroy == true ? 'glyphicon glyphicon-ok-circle' : 'glyphicon glyphicon-remove-circle'"></i>
                                            </label>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </accordion-group>

                    <accordion-group is-open="trialDetailView.accordions[6]">
                        <accordion-heading>
                            Trial Status  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[6], 'glyphicon-chevron-right': !trialDetailView.accordions[6]}"></i>
                        </accordion-heading>

                        <div class="form-group col-sm-12">
                            <div class="col-sm-12">
                                <table class="table table-striped table-condensed">
                                    <thead>
                                    <th>Status Date</th>
                                    <th>Status</th>
                                    <th>Why Study Stopped</th>
                                    <th></th>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td class="col-md-3">
                                            <div class="input-group add-on date datepicker" date-date-format="yyyy-mm-dd">
                                                <input type="text" class="form-control input-normal" datepicker-popup="{{trialDetailView.dateFormat}}" ng-model="trialDetailView.status_date"
                                                       is-open="trialDetailView.status_date_opened" datepicker-options="trialDetailView.dateOptions" ng-required="false" close-text="Close" disabled />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default" ng-click="trialDetailView.openCalendar($event, 'status_date')">
                                                        <i class="glyphicon glyphicon-calendar"></i>
                                                    </button>
                                                </span>
                                            </div>
                                        </td>
                                        <td class="col-md-4">
                                            <div>
                                                <select class="form-control" id="trial_status" ng-model="trialDetailView.trial_status_id"  ng-change="trialDetailView.watchOption('trial_status')">
                                                    <option value="">-Select a Trial Status-</option>
                                                    <option ng-repeat="trialStatus in trialDetailView.trialStatusArr" ng-hide="!trialDetailView.isExp && (trialStatus.code == 'AVA' || trialStatus.code == 'NLA' || trialStatus.code == 'TNA' || trialStatus.code == 'AFM')" value="{{trialStatus.id}}">
                                                        {{trialStatus.name}}
                                                    </option>
                                                </select>
                                            </div>
                                        </td>
                                        <td class="col-md-4">
                                            <div>
                                                <textarea style="resize: vertical;" class="form-control input-xs" id="why_stopped" ng-model="trialDetailView.why_stopped" ng-disabled="trialDetailView.why_stopped_disabled" />
                                            </div>
                                        </td>
                                        <td class="col-md-1">
                                            <div>
                                                <button class="btn btn-primary" ng-click="trialDetailView.addStatus()">
                                                    <i class="glyphicon glyphicon-plus"></i> Add
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>

                                <table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedStatuses.length > 0">
                                    <thead>
                                        <th>Status Date</th>
                                        <th>Status</th>
                                        <th>Why Study Stopped</th>
                                        <th></th>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="status in trialDetailView.addedStatuses track by $index" ng-class="status._destroy == true ? 'deleted-text animated-item' : 'animated-item'">
                                        <td class="col-md-3">{{status.status_date}}</td>
                                        <td class="col-md-4">{{status.trial_status_name}}</td>
                                        <td class="col-md-4">{{status.why_stopped}}</td>
                                        <td class="col-md-1" style="vertical-align: middle">
                                            <label class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, 'trial_status')">
                                                <i ng-class="status._destroy == true ? 'glyphicon glyphicon-ok-circle' : 'glyphicon glyphicon-remove-circle'"></i>
                                            </label>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </accordion-group>

                    <accordion-group is-open="trialDetailView.accordions[7]">
                        <accordion-heading>
                            Trial Dates  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[7], 'glyphicon-chevron-right': !trialDetailView.accordions[7]}"></i>
                        </accordion-heading>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Trial Start Date:</label>
                            <div class="col-sm-3">
                                <div class="input-group add-on date datepicker" date-date-format="yyyy-mm-dd">
                                    <input type="text" class="form-control input-normal" datepicker-popup="{{trialDetailView.dateFormat}}" ng-model="trialDetailView.curTrial.start_date"
                                           is-open="trialDetailView.start_date_opened" datepicker-options="trialDetailView.dateOptions" ng-required="false" close-text="Close" disabled />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default" ng-click="trialDetailView.openCalendar($event, 'start_date')">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                            <div class="col-sm-1">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.start_date_qual" value="Actual"> Actual</label>
                            </div>
                            <div class="col-sm-2">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.start_date_qual" value="Anticipated"> Anticipated</label>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Primary Completion Date:</label>
                            <div class="col-sm-3">
                                <div class="input-group add-on date datepicker" date-date-format="yyyy-mm-dd">
                                    <input type="text" class="form-control input-normal" datepicker-popup="{{trialDetailView.dateFormat}}" ng-model="trialDetailView.curTrial.primary_comp_date"
                                           is-open="trialDetailView.primary_comp_date_opened" datepicker-options="trialDetailView.dateOptions" ng-required="false" close-text="Close" disabled />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default" ng-click="trialDetailView.openCalendar($event, 'primary_comp_date')">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                            <div class="col-sm-1">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.primary_comp_date_qual" value="Actual"> Actual</label>
                            </div>
                            <div class="col-sm-2">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.primary_comp_date_qual" value="Anticipated"> Anticipated</label>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Completion Date:</label>
                            <div class="col-sm-3">
                                <div class="input-group add-on date datepicker" date-date-format="yyyy-mm-dd">
                                    <input type="text" class="form-control input-normal" datepicker-popup="{{trialDetailView.dateFormat}}" ng-model="trialDetailView.curTrial.comp_date"
                                           is-open="trialDetailView.comp_date_opened" datepicker-options="trialDetailView.dateOptions" ng-required="false" close-text="Close" disabled />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default" ng-click="trialDetailView.openCalendar($event, 'comp_date')">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                            <div class="col-sm-1">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.comp_date_qual" value="Actual"> Actual</label>
                            </div>
                            <div class="col-sm-2">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.comp_date_qual" value="Anticipated"> Anticipated</label>
                            </div>
                        </div>
                    </accordion-group>

                    <accordion-group is-open="trialDetailView.accordions[8]">
                        <accordion-heading>
                            FDA IND/IDE Information for applicable trials <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[8], 'glyphicon-chevron-right': !trialDetailView.accordions[8]}"></i>
                        </accordion-heading>

                        <div class="form-group col-sm-12">
                            <div class="col-sm-12">
                                <table class="table table-striped table-condensed">
                                    <thead>
                                    <th>IND/IDE Types</th>
                                    <th>IND/IDE Number</th>
                                    <th>IND/IDE Grantor</th>
                                    <th>IND/IDE Holder Type</th>
                                    <th>NIH Institution, NCI Division/Program Code (if applicable)</th>
                                    <th></th>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td class="col-md-2">
                                            <div>
                                                <select class="form-control" id="ind_ide_type" ng-model="trialDetailView.ind_ide_type" ng-change="trialDetailView.watchOption('ind_ide_type')">
                                                    <option value="">-Select-</option>
                                                    <option value="IND">IND</option>
                                                    <option value="IDE">IDE</option>
                                                </select>
                                            </div>
                                        </td>
                                        <td class="col-md-2">
                                            <div>
                                                <input class="form-control input-xs" id="ind_ide_number" ng-model="trialDetailView.ind_ide_number" />
                                            </div>
                                        </td>
                                        <td class="col-md-2">
                                            <div>
                                                <select class="form-control" id="grantor" ng-model="trialDetailView.grantor">
                                                    <option value="">-Select-</option>
                                                    <option ng-repeat="grantor in trialDetailView.grantorArr" value="{{grantor}}">
                                                        {{grantor}}
                                                    </option>
                                                </select>
                                            </div>
                                        </td>
                                        <td class="col-md-2">
                                            <div>
                                                <select class="form-control" id="holder_type" ng-model="trialDetailView.holder_type_id" ng-change="trialDetailView.watchOption('holder_type')">
                                                    <option value="">-Select-</option>
                                                    <option ng-repeat="holderType in trialDetailView.holderTypeArr" value="{{holderType.id}}">
                                                        {{holderType.name}}
                                                    </option>
                                                </select>
                                            </div>
                                        </td>
                                        <td class="col-md-3">
                                            <div>
                                                <select class="form-control" id="nih_nci" ng-model="trialDetailView.nih_nci">
                                                    <option value="">-Select-</option>
                                                    <option ng-repeat="nihNci in trialDetailView.nihNciArr" value="{{nihNci.code}}">
                                                        {{nihNci.code}}
                                                    </option>
                                                </select>
                                            </div>
                                        </td>
                                        <td class="col-md-1">
                                            <div>
                                                <button class="btn btn-primary" ng-click="trialDetailView.addIndIde()">
                                                    <i class="glyphicon glyphicon-plus"></i> Add
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                                <table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedIndIdes.length > 0">
                                    <thead>
                                        <th>IND/IDE Types</th>
                                        <th>IND/IDE Number</th>
                                        <th>IND/IDE Grantor</th>
                                        <th>IND/IDE Holder Type</th>
                                        <th>NIH Institution, NCI Division/Program Code (if applicable)</th>
                                        <th></th>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="indIde in trialDetailView.addedIndIdes track by $index" ng-class="indIde._destroy == true ? 'deleted-text animated-item' : 'animated-item'">
                                        <td class="col-md-2">{{indIde.ind_ide_type}}</td>
                                        <td class="col-md-2">{{indIde.ind_ide_number}}</td>
                                        <td class="col-md-2">{{indIde.grantor}}</td>
                                        <td class="col-md-2">{{indIde.holder_type_name}}</td>
                                        <td class="col-md-3">{{indIde.nih_nci}}</td>
                                        <td class="col-md-1" style="vertical-align: middle">
                                            <label class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, 'ind_ide')">
                                                <i ng-class="indIde._destroy == true ? 'glyphicon glyphicon-ok-circle' : 'glyphicon glyphicon-remove-circle'"></i>
                                            </label>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </accordion-group>

                    <accordion-group is-open="trialDetailView.accordions[9]">
                        <accordion-heading>
                            Regulatory Information  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[9], 'glyphicon-chevron-right': !trialDetailView.accordions[9]}"></i>
                        </accordion-heading>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Trial Oversight Authority:</label>
                            <div class="col-sm-9">
                                <table class="table table-striped table-condensed">
                                    <thead>
                                    <th>Country</th>
                                    <th>Organization</th>
                                    <th></th>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td class="col-md-4">
                                            <div>
                                                <select class="form-control input-xs" id="authority_country" ng-model="trialDetailView.authority_country" ng-change="trialDetailView.watchOption('authority_country')">
                                                    <option value="">-Select a Country-</option>
                                                    <option ng-repeat="country in trialDetailView.countryArr track by $index" value="{{country.name}}" ng-selected="trialDetailView.curTrial.authority_country == country.name">{{country.name}}</option>
                                                </select>
                                            </div>
                                        </td>
                                        <td class="col-md-7">
                                            <div>
                                                <select class="form-control input-xs" id="authority_org" ng-model="trialDetailView.authority_org">
                                                    <option value="">-Select an Organization-</option>
                                                    <option ng-repeat="org in trialDetailView.authorityOrgArr track by $index" value="{{org}}" ng-selected="trialDetailView.curTrial.authority_org == org">{{org}}</option>
                                                </select>
                                            </div>
                                        </td>
                                        <td class="col-md-1">
                                            <div>
                                                <button class="btn btn-primary" ng-click="trialDetailView.addAuthority()">
                                                    <i class="glyphicon glyphicon-plus"></i> Add
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                                <table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedAuthorities.length > 0">
                                    <thead>
                                    <th>Country</th>
                                    <th>Organization</th>
                                    <th></th>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="authority in trialDetailView.addedAuthorities track by $index" ng-class="authority._destroy == true ? 'deleted-text animated-item' : 'animated-item'">
                                        <td class="col-md-4">{{authority.country}}</td>
                                        <td class="col-md-7">{{authority.organization}}</td>
                                        <td class="col-md-1" style="vertical-align: middle">
                                            <label class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, 'authority')">
                                                <i ng-class="authority._destroy == true ? 'glyphicon glyphicon-ok-circle' : 'glyphicon glyphicon-remove-circle'"></i>
                                            </label>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">FDA Regulated Intervention Indicator:</label>
                            <div class="col-sm-1">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.intervention_indicator" value="No"> No</label>
                            </div>
                            <div class="col-sm-2">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.intervention_indicator" value="Yes"> Yes</label>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Section 801 Indicator:</label>
                            <div class="col-sm-1">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.sec801_indicator" value="No"> No</label>
                            </div>
                            <div class="col-sm-2">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.sec801_indicator" value="Yes"> Yes</label>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Data Monitoring Committee Appointed Indicator:</label>
                            <div class="col-sm-1">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.data_monitor_indicator" value="No"> No</label>
                            </div>
                            <div class="col-sm-2">
                                <label><input type="radio" ng-model="trialDetailView.curTrial.data_monitor_indicator" value="Yes"> Yes</label>
                            </div>
                        </div>
                    </accordion-group>

                    <accordion-group is-open="trialDetailView.accordions[10]">
                        <accordion-heading>
                            Trial Related Documents  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[10], 'glyphicon-chevron-right': !trialDetailView.accordions[10]}"></i>
                        </accordion-heading>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Protocol Document:</label>
                            <div class="col-sm-9">
                                <input type="file" ngf-select ng-model="trialDetailView.protocol_document" name="protocol_document" ngf-max-size="10MB">
                            </div>
                        </div>

                        <div ng-repeat="document in trialDetailView.curTrial.trial_documents" ng-if="document.document_type == 'Protocol Document'" class="form-group col-sm-12">
                            <label class="control-label col-sm-3"></label>
                            <div class="col-sm-9">
                                <a href="/ctrp/registry/trial_documents/download/{{document.id}}">{{document.file_name}}</a>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">IRB Approval:</label>
                            <div class="col-sm-9">
                                <input type="file" ngf-select ng-model="trialDetailView.irb_approval" name="irb_approval" ngf-max-size="10MB">
                            </div>
                        </div>

                        <div ng-repeat="document in trialDetailView.curTrial.trial_documents" ng-if="document.document_type == 'IRB Approval'" class="form-group col-sm-12">
                            <label class="control-label col-sm-3"></label>
                            <div class="col-sm-9">
                                <a href="/ctrp/registry/trial_documents/download/{{document.id}}">{{document.file_name}}</a>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">List of Participating Sites:</label>
                            <div class="col-sm-9">
                                <input type="file" ngf-select ng-model="trialDetailView.participating_sites" name="participating_sites" ngf-max-size="10MB">
                            </div>
                        </div>

                        <div ng-repeat="document in trialDetailView.curTrial.trial_documents" ng-if="document.document_type == 'List of Participating Sites'" class="form-group col-sm-12">
                            <label class="control-label col-sm-3"></label>
                            <div class="col-sm-9">
                                <a href="/ctrp/registry/trial_documents/download/{{document.id}}">{{document.file_name}}</a>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3">Informed Consent Document:</label>
                            <div class="col-sm-9">
                                <input type="file" ngf-select ng-model="trialDetailView.informed_consent" name="informed_consent" ngf-max-size="10MB">
                            </div>
                        </div>

                        <div ng-repeat="document in trialDetailView.curTrial.trial_documents" ng-if="document.document_type == 'Informed Consent'" class="form-group col-sm-12">
                            <label class="control-label col-sm-3"></label>
                            <div class="col-sm-9">
                                <a href="/ctrp/registry/trial_documents/download/{{document.id}}">{{document.file_name}}</a>
                            </div>
                        </div>

                        <div ng-repeat="i in trialDetailView.getNumArr(trialDetailView.otherDocNum) track by $index">
                            <div class="form-group col-sm-12">
                                <label class="control-label col-sm-3">Other:</label>
                                <div class="col-sm-3">
                                    <input type="file" ngf-select ng-model="trialDetailView.other_documents[$index]" name="other_documents" ngf-max-size="10MB">
                                </div>
                            </div>

                            <div class="form-group col-sm-12">
                                <label class="control-label col-sm-3"></label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control input-xs" ng-model="trialDetailView.other_document_subtypes[$index]" placeholder="Please describe the document">
                                </div>
                            </div>
                        </div>

                        <div class="form-group col-sm-12">
                            <label class="control-label col-sm-3"></label>
                            <div class="col-sm-9">
                                <button class="btn btn-primary" ng-click="trialDetailView.addOtherDoc()">
                                    <i class="glyphicon glyphicon-plus"></i> Add More ...
                                </button>
                            </div>
                        </div>

                        <div ng-repeat="document in trialDetailView.curTrial.trial_documents" ng-if="document.document_type == 'Other Document'" class="form-group col-sm-12">
                            <label class="control-label col-sm-3"></label>
                            <div class="col-sm-9">
                                <a href="/ctrp/registry/trial_documents/download/{{document.id}}">{{document.file_name}}</a><br>{{document.document_subtype}}
                            </div>
                        </div>
                    </accordion-group>
                </accordion>

                <div id="buttonBar" class="form-group col-sm-12">
                    <div class="col-sm-offset-3 col-sm-9">
                        <input type="submit" class="btn btn-success" id="save_btn" ng-click="trialDetailView.updateTrial()" ng-disabled="trial_form.$invalid" value="Save">
                        <button class="btn btn-warning" ng-click="trialDetailView.reload()">Reset</button>
                        <button class="btn btn-default" back-button>Cancel</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
