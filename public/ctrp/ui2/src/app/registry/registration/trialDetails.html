<div class="row-fluid">
    <div class="col-xs-12 drop-shadow">
        <div class="row">
            <p>
                <h4 ng-if="trialDetailView.curTrial.new">Register Trial</h4>
                <h4 ng-if="!trialDetailView.curTrial.new && trialDetailView.curTrial.edit_type === 'amend'">Amend Trial</h4>
                <h4 ng-if="!trialDetailView.curTrial.new && trialDetailView.curTrial.edit_type === 'update'">Update Trial</h4>
            </p>
        </div>

        <div class="row">
            <p>
                <button type="button" class="btn btn-primary" ng-show="!trialDetailView.collapsed" ng-click="trialDetailView.collapseAccordion()">
                    <i class="glyphicon glyphicon-minus"></i> Collapse All
                </button>
                <button type="button" class="btn btn-primary" ng-show="trialDetailView.collapsed" ng-click="trialDetailView.expandAccordion()">
                    <i class="glyphicon glyphicon-plus"></i> Expand All
                </button>
            </p>
        </div>

        <div class="row">
            <form class="form form-horizontal" role="form" name="trial_form" novalidate ctrp-submit="trialDetailView.updateTrial()">
                <uib-accordion close-others="false">
                    <uib-accordion-group ng-if="['amend'].indexOf(trialDetailView.curTrial.edit_type) > -1" is-open="trialDetailView.accordions[0]">
                        <uib-accordion-heading>
                            Amendment Details  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[0], 'glyphicon-chevron-right': !trialDetailView.accordions[0]}"></i>
                        </uib-accordion-heading>

                        <div class="form-group">
                            <label class="control-label col-xs-12 col-sm-3">Amendment Number:</label>
                            <div class=" col-xs-12 col-sm-6">
                                <input type="text" restriction-field class="form-control input-sm" id="amendment_num" ng-model="trialDetailView.amendment_num">
                            </div>
                        </div>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.amendment_date)}">
                            <label class="control-label col-xs-12 col-sm-3">Amendment Date:</label>
                            <div class="col-xs-12 col-sm-3">
                                <div class="input-group add-on date datepicker" date-date-format="yyyy-mm-dd">
                                    <input type="text" class="form-control input-sm" name="amendment_date" datepicker-popup="{{trialDetailView.dateFormat}}" ng-model="trialDetailView.amendment_date"
                                           is-open="trialDetailView.amendment_date_opened" datepicker-options="trialDetailView.dateOptions" close-text="Close" required disabled />
                                    <span class="input-group-btn">
                                        <button restriction-field type="button" class="btn btn-default" ng-click="trialDetailView.openCalendar($event, 'amendment_date')">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.amendment_date)">
                                    Amendment Date is required
                                </span>
                            </div>
                        </div>
                    </uib-accordion-group>

                    <uib-accordion-group is-open="trialDetailView.accordions[1]">
                        <uib-accordion-heading>
                            Trial Identifiers  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[1], 'glyphicon-chevron-right': !trialDetailView.accordions[1]}"></i>
                        </uib-accordion-heading>

                        <div class="form-group required">
                            <label class="control-label col-xs-12 col-sm-3">Study Source:</label>
                            <div class=" col-xs-12 col-sm-6">
                                <select class="form-control input-sm" id="study_source" ng-model="trialDetailView.curTrial.study_source_id" ng-options="studySource.id as studySource.name for studySource in trialDetailView.studySourceArr" disabled>
                                    <option value="">--</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.lead_protocol_id) || (trial_form.lead_protocol_id.$error.required && trialDetailView.showLpiError)}">
                            <label class="control-label col-xs-12 col-sm-3">Lead Organization Trial Identifier:</label>
                            <div class=" col-xs-12 col-sm-6">
                                <input type="text" restriction-field class="form-control input-sm" id="lead_protocol_id" name="lead_protocol_id" ng-model="trialDetailView.curTrial.lead_protocol_id"
                                       ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1" required autofocus>
                                <span class="form-control-feedback" ng-show="trialDetailView.curTrial.lead_protocol_id.length" ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.lead_protocol_id) ? 'glyphicon glyphicon-ok glyphicon-green' : 'glyphicon glyphicon-exclamation-sign glyphicon-red'"></span>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.lead_protocol_id) || (trial_form.lead_protocol_id.$error.required && trialDetailView.showLpiError)">
                                    Lead Organization Trial Identifier is required
                                </span>
                            </div>
                        </div>

                        <div class="form-group" ng-show="trialDetailView.curTrial.nci_id">
                            <label class="control-label col-xs-12 col-sm-3">NCI ID:</label>
                            <div class="col-xs-12 col-sm-6 form-text">
                                {{trialDetailView.curTrial.nci_id}}
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-xs-12 col-sm-3">Other Trial Identifier:</label>
                            <div class=" col-xs-12 col-sm-6">
                                <table class="table table-striped table-condensed">
                                    <thead>
                                        <th>Protocol ID Type</th>
                                        <th>Protocol ID</th>
                                        <th></th>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td class="col-md-4">
                                            <div>
                                                <select restriction-field class="form-control input-sm" id="protocol_id_origin" ng-model="trialDetailView.protocol_id_origin_id">
                                                    <option value="">-Select a Protocol ID Type-</option>
                                                    <option ng-repeat="origin in trialDetailView.protocolIdOriginArr" value="{{origin.id}}">
                                                        {{origin.name}}
                                                    </option>
                                                </select>
                                            </div>
                                        </td>
                                        <td class="col-md-6">
                                            <div>
                                                <input restriction-field type="text" class="form-control input-sm" id="protocol_id" ng-model="trialDetailView.protocol_id" />
                                            </div>
                                        </td>
                                        <td class="col-md-2">
                                            <div>
                                                <button type="button" restriction-field class="btn btn-primary" ng-click="trialDetailView.addOtherId()">
                                                    <i class="glyphicon glyphicon-plus"></i> Add
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                                <table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedOtherIds.length > 0">
                                    <thead>
                                        <th>Protocol ID Type</th>
                                        <th>Protocol ID</th>
                                        <th></th>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="otherId in trialDetailView.addedOtherIds track by $index" ng-class="otherId._destroy == true ? 'deleted-text animated-item' : 'animated-item'">
                                            <td class="col-md-4 protocol-id-origin">{{otherId.protocol_id_origin_name}}</td>
                                            <td class="col-md-6 protocol-id">{{otherId.protocol_id}}</td>
                                            <td class="col-md-2" style="vertical-align: middle">
                                                <label restriction-field class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, 'other_id')">
                                                    <i ng-class="otherId._destroy == true ? 'glyphicon glyphicon-ok-circle' : 'glyphicon glyphicon-remove-circle'"></i>
                                                </label>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </uib-accordion-group>

                    <uib-accordion-group is-open="trialDetailView.accordions[2]">
                        <uib-accordion-heading>
                            Trial Details  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[2], 'glyphicon-chevron-right': !trialDetailView.accordions[2]}"></i>
                        </uib-accordion-heading>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.official_title)}">
                            <label class="control-label col-xs-12 col-sm-3">Official Title:</label>
                            <div class=" col-xs-12 col-sm-6">
                                <textarea restriction-field class="form-control input-sm" id="official_title" name="official_title" ng-model="trialDetailView.curTrial.official_title"
                                          ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1" required ></textarea>
                                <span class="form-control-feedback" ng-show="trialDetailView.curTrial.official_title.length" ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.official_title) ? 'glyphicon glyphicon-ok glyphicon-green' : 'glyphicon glyphicon-exclamation-sign glyphicon-red'"></span>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.official_title)">
                                    Official Title is required
                                </span>
                            </div>
                        </div>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.phase)}">
                            <label class="control-label col-xs-12 col-sm-3">Phase:</label>
                            <div class=" col-xs-12 col-sm-6">
                                <select restriction-field class="form-control input-sm" id="phase" name="phase" ng-model="trialDetailView.curTrial.phase_id" ng-options="phase.id as phase.name for phase in trialDetailView.phaseArr"
                                        ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1" required>
                                    <option value="">-Select a Phase-</option>
                                </select>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.phase)">
                                    Phase is required
                                </span>
                            </div>
                        </div>

                        <div class="form-group required">
                            <label class="control-label col-xs-12 col-sm-3">Pilot?</label>
                            <div class="col-xs-12 col-sm-9">
                                <label class="radio-inline"><input type="radio" restriction-field ng-model="trialDetailView.curTrial.pilot" value="No" ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1"> No</label>
                                <label class="radio-inline"><input type="radio" restriction-field ng-model="trialDetailView.curTrial.pilot" value="Yes" ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1"> Yes</label>
                            </div>
                        </div>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.research_category)}">
                            <label class="control-label col-xs-12 col-sm-3">Research Category:</label>
                            <div class=" col-xs-12 col-sm-6">
                                <select restriction-field class="form-control input-sm" id="research_category" name="research_category" ng-model="trialDetailView.curTrial.research_category_id"
                                        ng-options="category.id as category.name for category in trialDetailView.researchCategoryArr"
                                        ng-change="trialDetailView.watchOption('research_category')"ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1" required>
                                    <option value="">-Select a Research Category-</option>
                                </select>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.research_category)">
                                    Research Category is required
                                </span>
                            </div>
                        </div>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.primary_purpose)}">
                            <label class="control-label col-xs-12 col-sm-3">Primary Purpose:</label>
                            <div class=" col-xs-12 col-sm-6">
                                <select restriction-field class="form-control input-sm" id="primary_purpose" name="primary_purpose" ng-model="trialDetailView.curTrial.primary_purpose_id"
                                        ng-options="primaryPurpose.id as primaryPurpose.name for primaryPurpose in trialDetailView.primaryPurposeArr"
                                        ng-change="trialDetailView.watchOption('primary_purpose')" ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1" required>
                                    <option value="">-Select a Primary Purpose-</option>
                                </select>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.primary_purpose)">
                                    Primary Purpose is required
                                </span>
                            </div>
                        </div>

                        <div ng-if="trialDetailView.showPrimaryPurposeOther" class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.primary_purpose_other)}">
                            <label class="control-label col-xs-12 col-sm-3">Describe "Other" Primary Purpose:</label>
                            <div class=" col-xs-12 col-sm-6">
                                <textarea restriction-field class="form-control input-sm" id="primary_purpose_other" name="primary_purpose_other" ng-model="trialDetailView.curTrial.primary_purpose_other"
                                          ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1" required></textarea>
                                <span class="form-control-feedback" ng-show="trialDetailView.curTrial.primary_purpose_other.length" ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.primary_purpose_other) ? 'glyphicon glyphicon-ok glyphicon-green' : 'glyphicon glyphicon-exclamation-sign glyphicon-red'"></span>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.primary_purpose_other)">
                                    Other Primary Purpose is required
                                </span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-xs-12 col-sm-3">Secondary Purpose:</label>
                            <div class=" col-xs-12 col-sm-6">
                                <select restriction-field class="form-control input-sm" id="secondary_purpose" name="secondary_purpose" ng-model="trialDetailView.curTrial.secondary_purpose_id"
                                        ng-options="secondaryPurpose.id as secondaryPurpose.name for secondaryPurpose in trialDetailView.secondaryPurposeArr"
                                        ng-change="trialDetailView.watchOption('secondary_purpose')" ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1">
                                    <option value="">-Select a Secondary Purpose-</option>
                                </select>
                            </div>
                        </div>

                        <div ng-if="trialDetailView.showSecondaryPurposeOther" class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.secondary_purpose_other)}">
                            <label class="control-label col-xs-12 col-sm-3">Describe "Other" Secondary Purpose:</label>
                            <div class=" col-xs-12 col-sm-6">
                                <textarea restriction-field class="form-control input-sm" id="secondary_purpose_other" name="secondary_purpose_other" ng-model="trialDetailView.curTrial.secondary_purpose_other"
                                          ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1" required></textarea>
                                <span class="form-control-feedback" ng-show="trialDetailView.curTrial.secondary_purpose_other.length" ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.secondary_purpose_other) ? 'glyphicon glyphicon-ok glyphicon-green' : 'glyphicon glyphicon-exclamation-sign glyphicon-red'"></span>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.secondary_purpose_other)">
                                    Other Secondary Purpose is required
                                </span>
                            </div>
                        </div>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.accrual_disease_term)}">
                            <label class="control-label col-xs-12 col-sm-3">Accrual Disease Terminology:</label>
                            <div class=" col-xs-12 col-sm-6">
                                <select restriction-field class="form-control input-sm" id="accrual_disease_term" name="accrual_disease_term" ng-model="trialDetailView.curTrial.accrual_disease_term_id"
                                        ng-options="term.id as term.name for term in trialDetailView.accrualDiseaseTermArr" ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1" required>
                                    <option value="">-Select an Accrual Disease Terminology-</option>
                                </select>
                               <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.accrual_disease_term)">
                                    Accrual Disease Terminology is required
                                </span>
                            </div>
                        </div>
                    </uib-accordion-group>

                    <uib-accordion-group is-open="trialDetailView.accordions[3]">
                        <uib-accordion-heading>
                            Lead Organization/Principal Investigator  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[3], 'glyphicon-chevron-right': !trialDetailView.accordions[3]}"></i>
                        </uib-accordion-heading>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.lead_org_name)}">
                            <label class="control-label col-xs-12 col-sm-3">Lead Organization:</label>
                            <div class="col-xs-12 col-sm-6">
                                <input type="text" class="form-control input-sm" name="lead_org_name" disabled ng-model="trialDetailView.selectedLoArray[0].name" required>
                                <span class="form-control-feedback" ng-show="trialDetailView.selectedLoArray[0].name.length" ng-class="!ctrpbtn.ctrpbtn.trial_form.needsAttention(trial_form.lead_org_name) ? 'glyphicon glyphicon-ok glyphicon-green' : 'glyphicon glyphicon-exclamation-sign glyphicon-red'"></span>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.lead_org_name)">
                                    Lead Organization is required
                                </span>
                            </div>
                            <div class="col-xs-12 col-xs-3" ng-hide="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1">
                                <ctrp-org-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-orgs-array="trialDetailView.selectedLoArray"></ctrp-org-adv-search-modal-button>
                            </div>
                        </div>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.pi_name)}">
                            <label class="control-label col-xs-12 col-sm-3">Principal Investigator:</label>
                            <div class="col-xs-12 col-sm-6">
                                <input type="text" class="form-control input-sm" disabled value="{{trialDetailView.selectedPiArray[0].fname + ' ' + (trialDetailView.selectedPiArray[0].mname ? trialDetailView.selectedPiArray[0].mname + ' ' : '') + trialDetailView.selectedPiArray[0].lname}}">
                                <span class="form-control-feedback" ng-show="trialDetailView.selectedPiArray[0].lname.length" ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.pi_name) ? 'glyphicon glyphicon-ok glyphicon-green' : 'glyphicon glyphicon-exclamation-sign glyphicon-red'"></span>
                                <input type="hidden" name="pi_name" ng-model="trialDetailView.selectedPiArray[0]" required>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.pi_name)">
                                    Principal Investigator is required
                                </span>
                            </div>
                            <div class="col-xs-12 col-xs-3" ng-hide="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1">
                                <ctrp-person-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-persons-array="trialDetailView.selectedPiArray"></ctrp-person-adv-search-modal-button>
                            </div>
                        </div>
                    </uib-accordion-group>

                    <uib-accordion-group is-open="trialDetailView.accordions[4]">
                        <uib-accordion-heading>
                            Sponsor/Responsible Party  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[4], 'glyphicon-chevron-right': !trialDetailView.accordions[4]}"></i>
                        </uib-accordion-heading>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.sponsor_name)}">
                            <label class="control-label col-xs-12 col-sm-3">Sponsor:</label>
                            <div class="col-xs-12 col-sm-6">
                                <input type="text" class="form-control input-sm" name="sponsor_name" disabled ng-model="trialDetailView.selectedSponsorArray[0].name" required>
                                <span class="form-control-feedback" ng-show="trialDetailView.selectedSponsorArray[0].name.length" ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.sponsor_name) ? 'glyphicon glyphicon-ok glyphicon-green' : 'glyphicon glyphicon-exclamation-sign glyphicon-red'"></span>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.sponsor_name)">
                                    Sponsor is required
                                </span>
                            </div>
                            <div class="col-xs-12 col-sm-3" ng-hide="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1">
                                <ctrp-org-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-orgs-array="trialDetailView.selectedSponsorArray"></ctrp-org-adv-search-modal-button>
                            </div>
                        </div>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.responsible_party)}">
                            <label class="control-label col-xs-12 col-sm-3">Responsible Party:</label>
                            <div class=" col-xs-12 col-sm-6">
                                <select restriction-field class="form-control input-sm" id="responsible_party" name="responsible_party" ng-model="trialDetailView.curTrial.responsible_party_id"
                                        ng-options="responsibleParty.id as responsibleParty.name for responsibleParty in trialDetailView.responsiblePartyArr"
                                        ng-change="trialDetailView.watchOption('responsible_party')" ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1" required>
                                    <option value="">-Select a Responsible Party-</option>
                                </select>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.responsible_party)">
                                    Responsible Party is required
                                </span>
                            </div>
                        </div>

                        <div ng-show="trialDetailView.showInvestigator" class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.investigator_name)}">
                            <label class="control-label col-xs-12 col-sm-3">Investigator:</label>
                            <div class="col-xs-12 col-sm-6">
                                <input type="text" class="form-control input-sm" disabled value="{{trialDetailView.selectedInvArray[0].fname + ' ' + (trialDetailView.selectedInvArray[0].mname ? trialDetailView.selectedInvArray[0].mname + ' ' : '') + trialDetailView.selectedInvArray[0].lname}}"/>
                                <span class="form-control-feedback" ng-show="trialDetailView.selectedInvArray[0].lname.length" ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.investigator_name) ? 'glyphicon glyphicon-ok glyphicon-green' : 'glyphicon glyphicon-exclamation-sign glyphicon-red'"></span>
                                <input type="hidden" name="investigator_name" ng-model="trialDetailView.selectedInvArray[0]" ng-required="trialDetailView.showInvestigator">
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.investigator_name)">
                                    Investigator is required
                                </span>
                            </div>
                            <div class="col-xs-12 col-sm-3" ng-show="trialDetailView.showInvSearchBtn && ['update'].indexOf(trialDetailView.curTrial.edit_type) < 0">
                                <ctrp-person-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-persons-array="trialDetailView.selectedInvArray"></ctrp-person-adv-search-modal-button>
                            </div>
                        </div>

                        <div ng-show="trialDetailView.showInvestigator" class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.investigator_title)}">
                            <label class="control-label col-xs-12 col-sm-3">Investigator Title:</label>
                            <div class="col-xs-12 col-sm-6">
                                <input type="text" restriction-field class="form-control input-sm" id="investigator_title" name="investigator_title" ng-model="trialDetailView.curTrial.investigator_title"
                                       ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1" ng-required="trialDetailView.showInvestigator">
                                <span class="form-control-feedback" ng-show="trialDetailView.curTrial.investigator_title.length" ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.investigator_title) ? 'glyphicon glyphicon-ok glyphicon-green' : 'glyphicon glyphicon-exclamation-sign glyphicon-red'"></span>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.investigator_title)">
                                    Investigator Title is required
                                </span>
                            </div>
                        </div>

                        <div ng-show="trialDetailView.showInvestigator" class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.inv_aff_name)}">
                            <label class="control-label col-xs-12 col-sm-3">Investigator Affiliation:</label>
                            <div class="col-xs-12 col-sm-6">
                                <input type="text" class="form-control input-sm" disabled value="{{trialDetailView.selectedIaArray[0].name}}"/>
                                <span class="form-control-feedback" ng-show="trialDetailView.selectedIaArray[0].name.length" ng-class="!ctrpbtn.trial_form.needsAttention(trial_form.inv_aff_name) ? 'glyphicon glyphicon-ok glyphicon-green' : 'glyphicon glyphicon-exclamation-sign glyphicon-red'"></span>
                                <input type="hidden" name="inv_aff_name" ng-model="trialDetailView.selectedIaArray[0]" ng-required="trialDetailView.showInvestigator">
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.inv_aff_name)">
                                    Investigator Affilication is required
                                </span>
                            </div>
                            <div class="col-xs-12 col-sm-3" ng-show="!trialDetailView.showInvSearchBtn && ['update'].indexOf(trialDetailView.curTrial.edit_type) < 0">
                                <ctrp-org-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-orgs-array="trialDetailView.selectedIaArray"></ctrp-org-adv-search-modal-button>
                            </div>
                        </div>
                    </uib-accordion-group>

                    <uib-accordion-group is-open="trialDetailView.accordions[5]">
                        <uib-accordion-heading>
                            Data Table 4 Information  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[5], 'glyphicon-chevron-right': !trialDetailView.accordions[5]}"></i>
                        </uib-accordion-heading>

                        <div class="form-group required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.fs_dummy)}">
                            <label class="control-label col-xs-12 col-sm-3">Data Table 4 Funding Source:</label>
                            <div class="col-xs-12 col-sm-9" ng-hide="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1">
                                <ctrp-org-adv-search-modal-button max-row-selectable="1" use-built-in-template="false" selected-orgs-array="trialDetailView.selectedFsArray" allow-overwrite="false"></ctrp-org-adv-search-modal-button>
                                <input type="hidden" name="fs_dummy" ng-model="trialDetailView.dummyField" ng-required="trialDetailView.fsNum === 0">
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.fs_dummy)">
                                    Funding Source is required
                                </span>
                            </div>
                        </div>

                        <div ng-repeat="fs in trialDetailView.addedFses track by $index" class="form-group">
                            <div class="col-xs-12 col-sm-3"></div>
                            <div class="col-xs-12 col-sm-6">
                                <input type="text" class="form-control input-sm" ng-class="fs._destroy == true ? 'deleted-text animated-item' : 'animated-item'" disabled value="{{fs.organization_name}}"/>
                            </div>
                            <label restriction-field class="col-xs-12 col-sm-1 btn btn-default" ng-click="trialDetailView.toggleSelection($index, 'funding_source')" ng-hide="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1">
                                <i ng-class="fs._destroy == true ? 'glyphicon glyphicon-ok-circle' : 'glyphicon glyphicon-remove-circle'"></i>
                            </label>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-xs-12 col-sm-3">Program code:</label>
                            <div class=" col-xs-12 col-sm-6">
                                <input type="text" restriction-field class="form-control input-sm" id="program_code" ng-model="trialDetailView.curTrial.program_code"
                                       ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1">
                            </div>
                        </div>
                    </uib-accordion-group>

                    <uib-accordion-group is-open="trialDetailView.accordions[6]">
                        <uib-accordion-heading>
                            NIH Grant Information (for NIH funded Trials)  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[6], 'glyphicon-chevron-right': !trialDetailView.accordions[6]}"></i>
                        </uib-accordion-heading>

                        <div class="form-group required">
                            <label class="control-label col-xs-12 col-sm-3">Is this trial funded by an NCI grant?</label>
                            <div class="col-xs-12 col-sm-9">
                                <label class="radio-inline"><input type="radio" restriction-field ng-model="trialDetailView.curTrial.grant_question" value="Yes"> Yes</label>
                                <label class="radio-inline"><input type="radio" restriction-field ng-model="trialDetailView.curTrial.grant_question" value="No"> No</label>
                            </div>
                        </div>

                        <div class="form-group" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.grant_dummy)}">
                            <div class="col-sm-12">
                                <table class="table table-striped table-condensed">
                                    <thead>
                                        <th>Funding Mechanism</th>
                                        <th>Institute Code</th>
                                        <th>Serial Number</th>
                                        <th>NCI Division/Program Code</th>
                                        <th></th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="col-md-2">
                                                <div>
                                                    <select restriction-field class="form-control input-sm" id="funding_mechanism" ng-model="trialDetailView.funding_mechanism">
                                                        <option value="">-Select-</option>
                                                        <option ng-repeat="mechanism in trialDetailView.fundingMechanismArr" value="{{mechanism.code}}">
                                                            {{mechanism.code}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </td>
                                            <td class="col-md-2">
                                                <div>
                                                    <select restriction-field class="form-control input-sm" id="institute_code" ng-model="trialDetailView.institute_code">
                                                        <option value="">-Select-</option>
                                                        <option ng-repeat="institute in trialDetailView.instituteCodeArr" value="{{institute.code}}">
                                                            {{institute.code}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </td>
                                            <td class="col-md-3">
                                                <div>
                                                    <input restriction-field class="form-control input-sm" id="serial_number" ng-model="trialDetailView.serial_number" />
                                                </div>
                                            </td>
                                            <td class="col-md-4">
                                                <div>
                                                    <select restriction-field class="form-control input-sm" id="nci" ng-model="trialDetailView.nci">
                                                        <option value="">-Select-</option>
                                                        <option ng-repeat="nci in trialDetailView.nciArr" value="{{nci.code}}">
                                                            {{nci.code}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </td>
                                            <td class="col-md-1">
                                                <div>
                                                    <button type="button" restriction-field class="btn btn-primary" ng-click="trialDetailView.addGrant()">
                                                        <i class="glyphicon glyphicon-plus"></i> Add
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                                <input type="hidden" name="grant_dummy" ng-model="trialDetailView.dummyField" ng-required="trialDetailView.curTrial.grant_question === 'Yes' && trialDetailView.grantNum === 0">
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.grant_dummy)">
                                    Grant is required
                                </span>

                                <table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedGrants.length > 0">
                                    <thead>
                                        <th>Funding Mechanism</th>
                                        <th>Institute Code</th>
                                        <th>Serial Number</th>
                                        <th>NCI Division/Program Code</th>
                                        <th></th>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="grant in trialDetailView.addedGrants track by $index" ng-class="grant._destroy == true ? 'deleted-text animated-item' : 'animated-item'">
                                            <td class="col-md-2">{{grant.funding_mechanism}}</td>
                                            <td class="col-md-2">{{grant.institute_code}}</td>
                                            <td class="col-md-3">{{grant.serial_number}}</td>
                                            <td class="col-md-4">{{grant.nci}}</td>
                                            <td class="col-md-1" style="vertical-align: middle">
                                                <label restriction-field class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, 'grant')">
                                                    <i ng-class="grant._destroy == true ? 'glyphicon glyphicon-ok-circle' : 'glyphicon glyphicon-remove-circle'"></i>
                                                </label>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </uib-accordion-group>

                    <uib-accordion-group is-open="trialDetailView.accordions[7]">
                        <uib-accordion-heading>
                            Trial Status  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[7], 'glyphicon-chevron-right': !trialDetailView.accordions[7]}"></i>
                        </uib-accordion-heading>

                        <div class="form-group required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.ts_dummy)}">
                            <div class="col-sm-12">
                                <table class="table table-striped table-condensed">
                                    <thead>
                                        <th>Status Date</th>
                                        <th>Status</th>
                                        <th>Comment</th>
                                        <th>Why Study Stopped</th>
                                        <th></th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="col-md-2">
                                                <div class="input-group add-on date datepicker" date-date-format="yyyy-mm-dd">
                                                    <input type="text" class="form-control input-sm" datepicker-popup="{{trialDetailView.dateFormat}}" ng-model="trialDetailView.status_date"
                                                           is-open="trialDetailView.status_date_opened" datepicker-options="trialDetailView.dateOptions" ng-required="false" close-text="Close" disabled />
                                                    <span class="input-group-btn">
                                                        <button restriction-field type="button" class="btn btn-default" ng-click="trialDetailView.openCalendar($event, 'status_date')">
                                                            <i class="glyphicon glyphicon-calendar"></i>
                                                        </button>
                                                    </span>
                                                </div>
                                            </td>
                                            <td class="col-md-3">
                                                <div>
                                                    <select restriction-field class="form-control input-sm" id="trial_status" ng-model="trialDetailView.trial_status_id"  ng-change="trialDetailView.watchOption('trial_status')">
                                                        <option value="">-Select a Trial Status-</option>
                                                        <option ng-repeat="trialStatus in trialDetailView.trialStatusArr" value="{{trialStatus.id}}">
                                                            {{trialStatus.name}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </td>
                                            <td class="col-md-3">
                                                <div>
                                                    <textarea style="resize: vertical;" class="form-control input-sm" id="status_comment" ng-model="trialDetailView.status_comment" />
                                                </div>
                                            </td>
                                            <td class="col-md-3">
                                                <div>
                                                    <textarea style="resize: vertical;" class="form-control input-sm" id="why_stopped" ng-model="trialDetailView.why_stopped" ng-disabled="trialDetailView.why_stopped_disabled" />
                                                </div>
                                            </td>
                                            <td class="col-md-1">
                                                <div>
                                                    <button type="button" restriction-field class="btn btn-primary" ng-click="trialDetailView.addStatus()">
                                                        <i class="glyphicon glyphicon-plus"></i> Add
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                                <input type="hidden" name="ts_dummy" ng-model="trialDetailView.dummyField" ng-required="trialDetailView.tsNum === 0">
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.ts_dummy)">
                                    Trial Status is required
                                </span>

                                <table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedStatuses.length > 0">
                                    <thead>
                                        <th>Status Date</th>
                                        <th>Status</th>
                                        <th>Comment</th>
                                        <th>Why Study Stopped</th>
                                        <th></th>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="status in trialDetailView.addedStatuses track by $index" ng-class="status._destroy == true ? 'deleted-text animated-item' : 'animated-item'">
                                            <td class="col-md-2">{{status.status_date}}</td>
                                            <td class="col-md-3">{{status.trial_status_name}}</td>
                                            <td class="col-md-3">{{status.comment}}</td>
                                            <td class="col-md-3">{{status.why_stopped}}</td>
                                            <td class="col-md-1" style="vertical-align: middle">
                                                <label restriction-field class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, 'trial_status')">
                                                    <i ng-class="status._destroy == true ? 'glyphicon glyphicon-ok-circle' : 'glyphicon glyphicon-remove-circle'"></i>
                                                </label>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </uib-accordion-group>

                    <uib-accordion-group is-open="trialDetailView.accordions[8]">
                        <uib-accordion-heading>
                            Trial Dates  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[8], 'glyphicon-chevron-right': !trialDetailView.accordions[8]}"></i>
                        </uib-accordion-heading>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.start_date) || ctrpbtn.trial_form.needsAttention(trial_form.start_date_qual)}">
                            <label class="control-label col-xs-12 col-sm-3">Trial Start Date:</label>
                            <div class="col-xs-12 col-sm-3">
                                <div class="input-group add-on date datepicker" date-date-format="yyyy-mm-dd">
                                    <input type="text" class="form-control input-sm" name="start_date" datepicker-popup="{{trialDetailView.dateFormat}}" ng-model="trialDetailView.curTrial.start_date"
                                           is-open="trialDetailView.start_date_opened" datepicker-options="trialDetailView.dateOptions" close-text="Close" required disabled>
                                    <span class="input-group-btn">
                                        <button restriction-field type="button" class="btn btn-default" ng-click="trialDetailView.openCalendar($event, 'start_date')">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.start_date)">
                                    Trial Start Date is required
                                </span>
                            </div>
                            <div class="col-xs-12 col-sm-6">
                                <label class="radio-inline">
                                    <input type="radio" name="start_date_qual" restriction-field ng-model="trialDetailView.curTrial.start_date_qual"
                                           value="Actual" ng-required="!trialDetailView.curTrial.start_date_qual"> Actual
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="start_date_qual" restriction-field ng-model="trialDetailView.curTrial.start_date_qual"
                                           value="Anticipated" ng-required="!trialDetailView.curTrial.start_date_qual"> Anticipated
                                </label>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.start_date_qual)">
                                    Trial Start Date Type is required
                                </span>
                            </div>
                        </div>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.primary_comp_date) || ctrpbtn.trial_form.needsAttention(trial_form.primary_comp_date_qual)}">
                            <label class="control-label col-xs-12 col-sm-3">Primary Completion Date:</label>
                            <div class="col-xs-12 col-sm-3">
                                <div class="input-group add-on date datepicker" date-date-format="yyyy-mm-dd">
                                    <input type="text" class="form-control input-sm" name="primary_comp_date" datepicker-popup="{{trialDetailView.dateFormat}}" ng-model="trialDetailView.curTrial.primary_comp_date"
                                           is-open="trialDetailView.primary_comp_date_opened" datepicker-options="trialDetailView.dateOptions" close-text="Close" required disabled />
                                    <span class="input-group-btn">
                                        <button restriction-field type="button" class="btn btn-default" ng-click="trialDetailView.openCalendar($event, 'primary_comp_date')">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.primary_comp_date)">
                                    Primary Completion Date is required
                                </span>
                            </div>
                            <div class="col-sm-6">
                                <label class="radio-inline">
                                    <input type="radio" name="primary_comp_date_qual" restriction-field ng-model="trialDetailView.curTrial.primary_comp_date_qual"
                                           value="Actual" ng-required="!trialDetailView.curTrial.primary_comp_date_qual"> Actual
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="primary_comp_date_qual" restriction-field ng-model="trialDetailView.curTrial.primary_comp_date_qual"
                                           value="Anticipated" ng-required="!trialDetailView.curTrial.primary_comp_date_qual"> Anticipated
                                </label>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.primary_comp_date_qual)">
                                    Primary Completion Date Type is required
                                </span>
                            </div>
                        </div>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.comp_date) || ctrpbtn.trial_form.needsAttention(trial_form.comp_date_qual)}">
                            <label class="control-label col-xs-12 col-sm-3">Completion Date:</label>
                            <div class="col-xs-12 col-sm-3">
                                <div class="input-group add-on date datepicker" date-date-format="yyyy-mm-dd">
                                    <input type="text" class="form-control input-sm" name="comp_date" datepicker-popup="{{trialDetailView.dateFormat}}" ng-model="trialDetailView.curTrial.comp_date"
                                           is-open="trialDetailView.comp_date_opened" datepicker-options="trialDetailView.dateOptions" close-text="Close" required disabled />
                                    <span class="input-group-btn">
                                        <button restriction-field type="button" class="btn btn-default" ng-click="trialDetailView.openCalendar($event, 'comp_date')">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.comp_date)">
                                    Completion Date is required
                                </span>
                            </div>
                            <div class="col-xs-12 col-sm-6">
                                <label class="radio-inline">
                                    <input type="radio" name="comp_date_qual" restriction-field ng-model="trialDetailView.curTrial.comp_date_qual"
                                           value="Actual" ng-required="!trialDetailView.curTrial.comp_date_qual"> Actual
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="comp_date_qual" restriction-field ng-model="trialDetailView.curTrial.comp_date_qual"
                                           value="Anticipated" ng-required="!trialDetailView.curTrial.comp_date_qual"> Anticipated
                                </label>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.comp_date_qual)">
                                    Completion Date Type is required
                                </span>
                            </div>
                        </div>
                    </uib-accordion-group>

                    <uib-accordion-group is-open="trialDetailView.accordions[9]">
                        <uib-accordion-heading>
                            FDA IND/IDE Information for applicable trials <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[9], 'glyphicon-chevron-right': !trialDetailView.accordions[9]}"></i>
                        </uib-accordion-heading>

                        <div class="form-group required">
                            <label class="control-label col-xs-12 col-sm-3">Does this trial have an associated IND/IDE?</label>
                            <div class="col-xs-12 col-sm-9">
                                <label class="radio-inline"><input type="radio" restriction-field ng-model="trialDetailView.curTrial.ind_ide_question" value="Yes" ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1"> Yes</label>
                                <label class="radio-inline"><input type="radio" restriction-field ng-model="trialDetailView.curTrial.ind_ide_question" value="No" ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1"> No</label>
                            </div>
                        </div>

                        <div class="form-group" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.ind_ide_dummy)}">
                            <div class="col-sm-12">
                                <table class="table table-striped table-condensed" ng-hide="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1">
                                    <thead>
                                        <th>IND/IDE Types</th>
                                        <th>IND/IDE Number</th>
                                        <th>IND/IDE Grantor</th>
                                        <th>IND/IDE Holder Type</th>
                                        <th>NIH Institution, NCI Division/Program Code (if applicable)</th>
                                        <th></th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="col-md-2">
                                                <div>
                                                    <select restriction-field class="form-control input-sm" id="ind_ide_type" ng-model="trialDetailView.ind_ide_type" ng-change="trialDetailView.watchOption('ind_ide_type')">
                                                        <option value="">-Select-</option>
                                                        <option value="IND">IND</option>
                                                        <option value="IDE">IDE</option>
                                                    </select>
                                                </div>
                                            </td>
                                            <td class="col-md-2">
                                                <div>
                                                    <input restriction-field class="form-control input-sm" id="ind_ide_number" ng-model="trialDetailView.ind_ide_number" />
                                                </div>
                                            </td>
                                            <td class="col-md-2">
                                                <div>
                                                    <select restriction-field class="form-control input-sm" id="grantor" ng-model="trialDetailView.grantor">
                                                        <option value="">-Select-</option>
                                                        <option ng-repeat="grantor in trialDetailView.grantorArr" value="{{grantor}}">
                                                            {{grantor}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </td>
                                            <td class="col-md-2">
                                                <div>
                                                    <select restriction-field class="form-control input-sm" id="holder_type" ng-model="trialDetailView.holder_type_id" ng-change="trialDetailView.watchOption('holder_type')">
                                                        <option value="">-Select-</option>
                                                        <option ng-repeat="holderType in trialDetailView.holderTypeArr" value="{{holderType.id}}">
                                                            {{holderType.name}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </td>
                                            <td class="col-md-3">
                                                <div>
                                                    <select restriction-field class="form-control input-sm" id="nih_nci" ng-model="trialDetailView.nih_nci">
                                                        <option value="">-Select-</option>
                                                        <option ng-repeat="nihNci in trialDetailView.nihNciArr" value="{{nihNci.code}}">
                                                            {{nihNci.code}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </td>
                                            <td class="col-md-1">
                                                <div>
                                                    <button type="button" restriction-field class="btn btn-primary" ng-click="trialDetailView.addIndIde()">
                                                        <i class="glyphicon glyphicon-plus"></i> Add
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                                <input type="hidden" name="ind_ide_dummy" ng-model="trialDetailView.dummyField" ng-required="trialDetailView.curTrial.ind_ide_question === 'Yes' && trialDetailView.indIdeNum === 0">
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.ind_ide_dummy)">
                                    IND/IDE is required
                                </span>

                                <table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedIndIdes.length > 0">
                                    <thead>
                                        <th>IND/IDE Types</th>
                                        <th>IND/IDE Number</th>
                                        <th>IND/IDE Grantor</th>
                                        <th>IND/IDE Holder Type</th>
                                        <th>NIH Institution, NCI Division/Program Code (if applicable)</th>
                                        <th ng-hide="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1"></th>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="indIde in trialDetailView.addedIndIdes track by $index" ng-class="indIde._destroy == true ? 'deleted-text animated-item' : 'animated-item'">
                                            <td class="col-md-2">{{indIde.ind_ide_type}}</td>
                                            <td class="col-md-2">{{indIde.ind_ide_number}}</td>
                                            <td class="col-md-2">{{indIde.grantor}}</td>
                                            <td class="col-md-2">{{indIde.holder_type_name}}</td>
                                            <td class="col-md-3">{{indIde.nih_nci}}</td>
                                            <td class="col-md-1" style="vertical-align: middle" ng-hide="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1">
                                                <label restriction-field class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, 'ind_ide')">
                                                    <i ng-class="indIde._destroy == true ? 'glyphicon glyphicon-ok-circle' : 'glyphicon glyphicon-remove-circle'"></i>
                                                </label>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </uib-accordion-group>

                    <uib-accordion-group is-open="trialDetailView.accordions[10]">
                        <uib-accordion-heading>
                            Regulatory Information  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[10], 'glyphicon-chevron-right': !trialDetailView.accordions[10]}"></i>
                        </uib-accordion-heading>

                        <div class="form-group required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.toa_dummy)}">
                            <label class="control-label col-xs-12 col-sm-3">Trial Oversight Authority:</label>
                            <div class="col-xs-12 col-sm-6">
                                <table class="table table-striped table-condensed" ng-hide="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1">
                                    <thead>
                                        <th>Country</th>
                                        <th>Organization</th>
                                        <th></th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="col-md-4">
                                                <div>
                                                    <select restriction-field class="form-control input-sm" id="authority_country" ng-model="trialDetailView.authority_country" ng-change="trialDetailView.watchOption('authority_country')">
                                                        <option value="">-Select a Country-</option>
                                                        <option ng-repeat="country in trialDetailView.countryArr track by $index" value="{{country.name}}" ng-selected="trialDetailView.curTrial.authority_country == country.name">{{country.name}}</option>
                                                    </select>
                                                </div>
                                            </td>
                                            <td class="col-md-6">
                                                <div>
                                                    <select restriction-field class="form-control input-sm" id="authority_org" ng-model="trialDetailView.authority_org">
                                                        <option value="">-Select an Organization-</option>
                                                        <option ng-repeat="org in trialDetailView.authorityOrgArr track by $index" value="{{org}}" ng-selected="trialDetailView.curTrial.authority_org == org">{{org}}</option>
                                                    </select>
                                                </div>
                                            </td>
                                            <td class="col-md-2">
                                                <div>
                                                    <button type="button" restriction-field class="btn btn-primary" ng-click="trialDetailView.addAuthority()">
                                                        <i class="glyphicon glyphicon-plus"></i> Add
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                                <input type="hidden" name="toa_dummy" ng-model="trialDetailView.dummyField" ng-required="trialDetailView.toaNum === 0">
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.toa_dummy)">
                                    Trial Oversight Authority is required
                                </span>

                                <table class="table table-bordered table-striped table-condensed" ng-show="trialDetailView.addedAuthorities.length > 0">
                                    <thead>
                                        <th>Country</th>
                                        <th>Organization</th>
                                        <th ng-hide="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1"></th>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="authority in trialDetailView.addedAuthorities track by $index" ng-class="authority._destroy == true ? 'deleted-text animated-item' : 'animated-item'">
                                            <td class="col-md-4">{{authority.country}}</td>
                                            <td class="col-md-6">{{authority.organization}}</td>
                                            <td class="col-md-2" style="vertical-align: middle" ng-hide="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1">
                                                <label restriction-field class="btn btn-default" ng-click="trialDetailView.toggleSelection($index, 'authority')">
                                                    <i ng-class="authority._destroy == true ? 'glyphicon glyphicon-ok-circle' : 'glyphicon glyphicon-remove-circle'"></i>
                                                </label>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.interventin_indicator)}">
                            <label class="control-label col-xs-12 col-sm-3">FDA Regulated Intervention Indicator:</label>
                            <div class="col-xs-12 col-sm-9">
                                <label class="radio-inline">
                                    <input type="radio" restriction-field name="interventin_indicator" ng-model="trialDetailView.curTrial.intervention_indicator"
                                           value="No" ng-required="!trialDetailView.curTrial.intervention_indicator" ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1"> No
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" restriction-field name="interventin_indicator" ng-model="trialDetailView.curTrial.intervention_indicator"
                                           value="Yes" ng-required="!trialDetailView.curTrial.intervention_indicator" ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1"> Yes
                                </label>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.interventin_indicator)">
                                    FDA Regulated Intervention Indicator is required
                                </span>
                            </div>
                        </div>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.sec801_indicator)}">
                            <label class="control-label col-xs-12 col-sm-3">Section 801 Indicator:</label>
                            <div class="col-xs-12 col-sm-9">
                                <label class="radio-inline">
                                    <input type="radio" restriction-field name="sec801_indicator" ng-model="trialDetailView.curTrial.sec801_indicator"
                                           value="No" ng-required="!trialDetailView.curTrial.sec801_indicator" ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1"> No
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" restriction-field name="sec801_indicator" ng-model="trialDetailView.curTrial.sec801_indicator"
                                           value="Yes" ng-required="!trialDetailView.curTrial.sec801_indicator" ng-disabled="trialDetailView.curTrial.intervention_indicator === 'No' || ['update'].indexOf(trialDetailView.curTrial.edit_type) > -1"> Yes
                                </label>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.sec801_indicator)">
                                    Section 801 Indicator is required
                                </span>
                            </div>
                        </div>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.data_monitor_indicator)}">
                            <label class="control-label col-xs-12 col-sm-3">Data Monitoring Committee Appointed Indicator:</label>
                            <div class="col-xs-12 col-sm-9">
                                <label class="radio-inline">
                                    <input type="radio" name="data_monitor_indicator" restriction-field ng-model="trialDetailView.curTrial.data_monitor_indicator"
                                           value="No" ng-required="!trialDetailView.curTrial.data_monitor_indicator" ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1"> No
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="data_monitor_indicator" restriction-field ng-model="trialDetailView.curTrial.data_monitor_indicator"
                                           value="Yes" ng-required="!trialDetailView.curTrial.data_monitor_indicator" ng-disabled="['update'].indexOf(trialDetailView.curTrial.edit_type) > -1"> Yes
                                </label>
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.data_monitor_indicator)">
                                    Data Monitoring Committee Appointed Indicator is required
                                </span>
                            </div>
                        </div>
                    </uib-accordion-group>

                    <uib-accordion-group is-open="trialDetailView.accordions[11]">
                        <uib-accordion-heading>
                            Trial Related Documents  <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': trialDetailView.accordions[11], 'glyphicon-chevron-right': !trialDetailView.accordions[11]}"></i>
                        </uib-accordion-heading>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.protocol_document)}">
                            <label class="control-label col-xs-12 col-sm-3">Protocol Document:</label>
                            <div class="col-xs-12 col-sm-9 form-file-upload">
                                <input type="file" restriction-field ngf-select ng-model="trialDetailView.protocol_document" name="protocol_document" ngf-max-size="10MB"
                                       ng-required="trialDetailView.curTrial.new || (!trialDetailView.curTrial.new && trialDetailView.protocolDocNum === 0)">
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.protocol_document)">
                                    Protocol Document is required
                                </span>
                            </div>
                        </div>

                        <div ng-repeat="document in trialDetailView.addedDocuments track by $index" ng-if="document.document_type == 'Protocol Document'" class="form-group">
                            <label class="control-label col-xs-12 col-sm-3"></label>
                            <div class="col-xs-12 col-sm-9">
                                <a ng-class="document._destroy == true ? 'deleted-text animated-item' : 'animated-item'" href="{{trialDetailView.downloadBaseUrl}}/{{document.id}}">{{document.file_name}}</a>
                                <span restriction-field ng-click="trialDetailView.toggleSelection($index, 'document')" class="btn glyphicon glyphicon-trash"></span>
                            </div>
                        </div>

                        <div ng-if="['amend'].indexOf(trialDetailView.curTrial.edit_type) > -1">
                            <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.change_memo)}">
                                <label class="control-label col-xs-12 col-sm-3">Change Memo Document:</label>
                                <div class="col-xs-12 col-sm-9 form-file-upload">
                                    <input type="file" restriction-field ngf-select ng-model="trialDetailView.change_memo" name="change_memo" ngf-max-size="10MB"
                                           ng-required="trialDetailView.curTrial.new || (!trialDetailView.curTrial.new && trialDetailView.changeMemoNum === 0)">
                                    <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.change_memo)">
                                        Change Memo Document is required
                                    </span>
                                </div>
                            </div>

                            <div ng-repeat="document in trialDetailView.addedDocuments track by $index" ng-if="document.document_type == 'Change Memo Document'" class="form-group">
                                <label class="control-label col-xs-12 col-sm-3"></label>
                                <div class="col-xs-12 col-sm-9">
                                    <a ng-class="document._destroy == true ? 'deleted-text animated-item' : 'animated-item'" href="{{trialDetailView.downloadBaseUrl}}/{{document.id}}">{{document.file_name}}</a>
                                    <span restriction-field ng-click="trialDetailView.toggleSelection($index, 'document')" class="btn glyphicon glyphicon-trash"></span>
                                </div>
                            </div>

                            <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.protocol_highlighted)}">
                                <label class="control-label col-xs-12 col-sm-3">Protocol Highlighted Document:</label>
                                <div class="col-xs-12 col-sm-9 form-file-upload">
                                    <input type="file" restriction-field ngf-select ng-model="trialDetailView.protocol_highlighted" name="protocol_highlighted" ngf-max-size="10MB"
                                           ng-required="trialDetailView.curTrial.new || (!trialDetailView.curTrial.new && trialDetailView.protocolHighlightedNum === 0)">
                                    <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.protocol_highlighted)">
                                        Protocol Highlighted Document is required
                                    </span>
                                </div>
                            </div>

                            <div ng-repeat="document in trialDetailView.addedDocuments track by $index" ng-if="document.document_type == 'Protocol Highlighted Document'" class="form-group">
                                <label class="control-label col-xs-12 col-sm-3"></label>
                                <div class="col-xs-12 col-sm-9">
                                    <a ng-class="document._destroy == true ? 'deleted-text animated-item' : 'animated-item'" href="{{trialDetailView.downloadBaseUrl}}/{{document.id}}">{{document.file_name}}</a>
                                    <span restriction-field ng-click="trialDetailView.toggleSelection($index, 'document')" class="btn glyphicon glyphicon-trash"></span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group has-feedback required" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.irb_approval)}">
                            <label class="control-label col-xs-12 col-sm-3">IRB Approval:</label>
                            <div class="col-xs-12 col-sm-9 form-file-upload">
                                <input type="file" restriction-field ngf-select ng-model="trialDetailView.irb_approval" name="irb_approval" ngf-max-size="10MB"
                                       ng-required="trialDetailView.curTrial.new || (!trialDetailView.curTrial.new && trialDetailView.irbApprovalNum === 0)">
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.irb_approval)">
                                    IRB Approval is required
                                </span>
                            </div>
                        </div>

                        <div ng-repeat="document in trialDetailView.addedDocuments track by $index" ng-if="document.document_type == 'IRB Approval'" class="form-group">
                            <label class="control-label col-xs-12 col-sm-3"></label>
                            <div class="col-xs-12 col-sm-9">
                                <a ng-class="document._destroy == true ? 'deleted-text animated-item' : 'animated-item'" href="{{trialDetailView.downloadBaseUrl}}/{{document.id}}">{{document.file_name}}</a>
                                <span restriction-field ng-click="trialDetailView.toggleSelection($index, 'document')" class="btn glyphicon glyphicon-trash"></span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-xs-12 col-sm-3">List of Participating Sites:</label>
                            <div class="col-xs -12 col-sm-9 form-file-upload">
                                <input type="file" restriction-field ngf-select ng-model="trialDetailView.participating_sites" name="participating_sites" ngf-max-size="10MB">
                            </div>
                        </div>

                        <div ng-repeat="document in trialDetailView.addedDocuments track by $index" ng-if="document.document_type == 'List of Participating Sites'" class="form-group">
                            <label class="control-label col-xs-12 col-sm-3"></label>
                            <div class="col-xs-12 col-sm-9">
                                <a ng-class="document._destroy == true ? 'deleted-text animated-item' : 'animated-item'" href="{{trialDetailView.downloadBaseUrl}}/{{document.id}}">{{document.file_name}}</a>
                                <span restriction-field ng-click="trialDetailView.toggleSelection($index, 'document')" class="btn glyphicon glyphicon-trash"></span>
                            </div>
                        </div>

                        <div class="form-group has-feedback" ng-class="{'has-error': ctrpbtn.trial_form.needsAttention(trial_form.informed_consent), 'required': trialDetailView.isInterventional}">
                            <label class="control-label col-xs-12 col-sm-3">Informed Consent Document:</label>
                            <div class="col-xs-12 col-sm-9 form-file-upload">
                                <input type="file" restriction-field ngf-select ng-model="trialDetailView.informed_consent" name="informed_consent" ngf-max-size="10MB"
                                       ng-required="trialDetailView.isInterventional && (trialDetailView.curTrial.new || (!trialDetailView.curTrial.new && trialDetailView.informedConsentNum === 0))">
                                <span class="help-block" ng-show="ctrpbtn.trial_form.needsAttention(trial_form.informed_consent)">
                                    Informed Consent Document is required for Interventional Trial
                                </span>
                            </div>
                        </div>

                        <div ng-repeat="document in trialDetailView.addedDocuments track by $index" ng-if="document.document_type == 'Informed Consent'" class="form-group">
                            <label class="control-label col-xs-12 col-sm-3"></label>
                            <div class="col-xs-12 col-sm-9">
                                <a ng-class="document._destroy == true ? 'deleted-text animated-item' : 'animated-item'" href="{{trialDetailView.downloadBaseUrl}}/{{document.id}}">{{document.file_name}}</a>
                                <span restriction-field ng-click="trialDetailView.toggleSelection($index, 'document')" class="btn glyphicon glyphicon-trash"></span>
                            </div>
                        </div>

                        <div ng-repeat="i in trialDetailView.getNumArr(trialDetailView.otherDocNum) track by $index">
                            <div class="form-group">
                                <label class="control-label col-xs-12 col-sm-3">Other:</label>
                                <div class="col-xs-12 col-sm-3 form-file-upload">
                                    <input type="file" restriction-field ngf-select ng-model="trialDetailView.other_documents[$index]" name="other_documents" ngf-max-size="10MB">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-xs-12 col-sm-3"></label>
                                <div class="col-xs-12 col-sm-6">
                                    <input type="text" restriction-field class="form-control input-sm" ng-model="trialDetailView.other_document_subtypes[$index]" placeholder="Please describe other document">
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-xs-12 col-sm-3"></label>
                            <div class="col-xs-12 col-sm-9">
                                <button type="button" restriction-field class="btn btn-primary" ng-click="trialDetailView.addOtherDoc()">
                                    <i class="glyphicon glyphicon-plus"></i> Add More ...
                                </button>
                            </div>
                        </div>

                        <div ng-repeat="document in trialDetailView.addedDocuments track by $index" ng-if="document.document_type == 'Other Document'" class="form-group">
                            <label class="control-label col-xs-12 col-sm-3"></label>
                            <div class="col-xs-12 col-sm-9">
                                <a ng-class="document._destroy == true ? 'deleted-text animated-item' : 'animated-item'" href="{{trialDetailView.downloadBaseUrl}}/{{document.id}}">{{document.file_name}}</a>
                                <span restriction-field ng-click="trialDetailView.toggleSelection($index, 'document')" class="btn glyphicon glyphicon-trash"></span>
                                <br>{{document.document_subtype}}
                            </div>
                        </div>
                    </uib-accordion-group>
                </uib-accordion>

                <div class="form-group" ng-hide="trialDetailView.curTrial.new || !trialDetailView.curTrial.created_by">
                    <label class="control-label col-xs-12 col-sm-3">Created By:</label>
                    <div class="col-xs-12 col-sm-6 form-text">
                        {{trialDetailView.curTrial.created_by}} ({{trialDetailView.curTrial.created_at | date: 'dd-MMM-yyyy H:mm'}})
                    </div>
                </div>

                <div class="form-group" ng-hide="trialDetailView.curTrial.new || !trialDetailView.curTrial.updated_by">
                    <label class="control-label col-xs-12 col-sm-3">Updated By:</label>
                    <div class="col-xs-12 col-sm-6 form-text">
                        {{trialDetailView.curTrial.updated_by}} ({{trialDetailView.curTrial.updated_at | date: 'dd-MMM-yyyy H:mm'}})
                    </div>
                </div>

                <div class="form-group no-bottom-margin">
                    <div class="btn-toolbar col-xs-12">
                        <button ng-show="trialDetailView.curTrial.new || trialDetailView.curTrial.is_draft" type="button" restriction-field class="btn btn-primary pull-right"
                                id="save_draft_btn" ng-click="trialDetailView.saveDraft()">
                            Save as Draft
                        </button>
                        <button type="submit" restriction-field class="btn btn-primary pull-right" id="submit_btn">
                            {{trial_form.$invalid ? 'Review' : 'Submit'}}
                        </button>
                        <button type="button" restriction-field class="btn btn-warning pull-right" ng-click="trialDetailView.reload()" ctrp-click-once>
                            <i class="glyphicon glyphicon-remove"></i> Reset
                        </button>
                    </div>
                </div>
            </form>
        </div>
        <div class="row top-offset-xs"></div>
    </div>
</div>
